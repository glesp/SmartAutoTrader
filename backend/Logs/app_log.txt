Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Fetching recommendations for user ID: 1
Fetching recommendations for user ID: 1
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 1
Generating user embedding for user ID 1
Calling local embedding service
Calling local embedding service
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated user embedding: 0.012381615, 0.02424476, -0.0042998665, 0.017042615, -0.0020894902, 0.07200975, 0.032271013, 0.07182269, -0.029239664, -0.036759317, -0.0018864581, -0.030657442, 0.021270648, 0.015404886, -0.0073412834, 0.0011804478, 0.018512618, -0.064599335, -0.043422125, 0.025321726, -0.030731173, -0.029803235, 0.005581431, -0.04871974, 0.0052061602, 0.0117026465, 0.04940428, 0.060820233, -0.065682486, -0.02674824, -0.008715481, 0.07471297, 0.005191677, -0.0027422032, -0.052547254, -0.20102224, -0.11696577, -0.004887981, -0.037225667, -0.03110717, -0.08579266, -0.071486115, -0.034202587, -0.03203518, -0.005058898, 0.015113555, 0.0061738575, 0.014395009, 0.09538121, 0.012448954, -0.032376945, -0.007698532, -0.03929896, -0.047328684, -0.004116015, -0.033269636, -0.0902357, 0.026720284, 0.0058673667, -0.03249893, 0.005629566, -0.033243187, -0.013395157, -0.0066261142, -0.012742623, -0.028868973, -0.011604789, -0.024817469, -0.06090461, 0.081365764, 0.018251315, 0.065133944, 0.029672742, -0.029624237, 0.007373278, -0.02779398, 0.07881554, -0.09364444, 0.011788737, -0.03306978, -0.06757514, -0.0075481716, -0.12835668, 0.01794214, 0.035493094, -0.025118379, 0.00937359, -0.064839, -0.032598037, 0.024818135, -0.078998335, -0.017180938, 0.062151734, -0.046501715, -0.08927812, 0.04950667, 0.061504167, 0.027341727, -0.0018225816, 0.052160572, 0.047882814, 0.013943688, 0.0045999037, 0.027996795, -0.013813083, -0.0019935952, -0.0068425853, 0.11311111, -0.0026992832, -0.016493924, -0.04418112, -0.00057715696, -0.077827044, -0.07003309, -0.10355045, -0.015734615, 0.036167942, 0.014831337, 0.08723817, 0.06974933, -0.03320681, -0.052084994, 0.026793856, 0.03224416, -0.03083215, -0.02936121, 0.017970955, 1.0009931E-32, -0.07540586, -0.040953893, -0.014978802, -0.020712268, -0.037676707, 0.060899913, -0.059535433, 0.090935245, -0.104427844, -0.034186255, -0.0027364914, 0.07125329, -0.076445825, 0.068130285, 0.04618232, -0.024334012, -0.02033701, -0.017687911, -0.061998025, -0.100348726, -0.009334153, 0.00049969106, 0.041866463, -0.037538208, 0.018114509, -0.021495841, 0.046746958, 0.0058532367, 0.011296849, 0.028661648, 0.0049967812, 0.021293236, -0.028552104, -0.028456422, -0.0599026, 0.025005618, -0.06596054, 0.008754479, -0.025867775, -0.022687117, 0.036053643, 0.003876931, -0.09278034, -0.033026353, -0.06273457, 0.10174492, 0.051962607, 0.039191462, -0.06228432, 0.0075851, -0.07110691, 0.013700966, -0.07137765, 0.021950072, -0.060872383, -0.027393285, -0.01005079, 0.032320708, 0.020342885, -0.04308101, -0.064905725, 0.085513756, 0.091484904, -0.09578084, -0.06072169, 0.051307295, 0.030827517, -0.059725273, -0.022251507, 0.056907013, -0.0143353185, 0.01682231, 0.03942171, 0.009771786, 0.024684055, 0.013501147, 0.011102638, 0.023086295, 0.047416065, -0.043554965, -0.013466956, -0.03939756, 0.03550251, 0.043990944, 0.081443265, -0.03936887, -0.03056774, -0.07734723, 0.018705979, -0.018674122, -0.05213852, 0.016079416, 0.0013432957, -0.043803815, -0.001535883, -1.1827393E-32, -0.0137260575, -0.024646465, 0.04492569, 0.023909671, 0.05241802, 0.0069492725, -0.02206733, -0.018109014, 0.04849452, 0.05216465, 0.004725988, 0.00040248936, 0.03372113, -0.03148689, 0.04448314, -0.0025778133, 0.013968759, -0.098832354, -0.033945054, -0.020057872, -0.0649255, 0.086504065, -0.06488163, 0.07598035, -0.031229896, -0.0011856352, 0.010302832, 0.016780293, -0.009518523, -0.05610782, -0.017297525, -0.076310195, -0.057853706, -0.012664431, -0.002802563, -0.033769906, -0.035152115, 0.09827526, -0.06848872, 0.17126998, -0.04850045, -0.08119668, 0.017509278, 0.07308132, -0.021054242, -0.073929265, 0.013704115, -0.026047455, 0.08734383, 0.047516704, 0.093356006, 0.07207601, -0.010212885, 0.042521104, -0.060549162, -0.008627061, 0.07652894, 0.004086818, 0.092982866, 0.034664012, 0.047986235, -0.030372808, -0.0019277794, -0.0055725854, -0.00093854935, -0.13218142, -0.004799824, -0.04036068, -0.01332664, -0.07887271, 0.004424336, -0.080561385, 0.002183817, -0.09268895, 0.038077876, -0.04770838, 0.019462451, 0.028333906, 0.1291994, 0.014144356, 0.019803585, 0.038429186, 0.09299551, 0.02284771, 0.00656607, 0.011994076, -0.07548806, 0.09850148, 0.0449726, 0.033237677, 0.04517508, 0.047070067, -0.05084374, 0.021842953, -0.102643825, -5.824915E-08, -0.021839086, -0.053250376, 0.031349853, 0.163075, 0.04408829, -0.046234075, 0.0065528154, 0.069606155, -0.07149129, -0.0030314971, 0.07431382, 0.013792589, -0.078140244, -0.002127636, -0.024354203, -0.009051566, 0.0080710845, 0.080780946, -0.02299891, 0.035973135, 0.025038972, 0.024075845, -0.03360756, 0.061703, 0.03919475, 0.005631174, -0.033111427, -0.0045225536, 0.06183132, 0.042251095, -0.02836628, 0.044246025, 0.016215265, -0.038777515, -0.003405004, -0.017433418, -0.042164356, 0.044445906, -0.06036227, 0.008551477, 0.12789138, -0.09689581, -0.04573304, 0.026402708, -0.0010394843, 0.004396332, 0.034547906, -0.1115681, -0.007983516, -0.01462107, -0.033586442, -0.074389204, 0.01087478, 0.064027674, 0.018943515, -0.06397476, -0.023299744, 0.03590389, -0.0037537157, -0.019096684, 0.1375304, -0.010479749, -0.08855874, 0.09941913
Generating vehicle embeddings...
Generated user embedding: 0.012381615, 0.02424476, -0.0042998665, 0.017042615, -0.0020894902, 0.07200975, 0.032271013, 0.07182269, -0.029239664, -0.036759317, -0.0018864581, -0.030657442, 0.021270648, 0.015404886, -0.0073412834, 0.0011804478, 0.018512618, -0.064599335, -0.043422125, 0.025321726, -0.030731173, -0.029803235, 0.005581431, -0.04871974, 0.0052061602, 0.0117026465, 0.04940428, 0.060820233, -0.065682486, -0.02674824, -0.008715481, 0.07471297, 0.005191677, -0.0027422032, -0.052547254, -0.20102224, -0.11696577, -0.004887981, -0.037225667, -0.03110717, -0.08579266, -0.071486115, -0.034202587, -0.03203518, -0.005058898, 0.015113555, 0.0061738575, 0.014395009, 0.09538121, 0.012448954, -0.032376945, -0.007698532, -0.03929896, -0.047328684, -0.004116015, -0.033269636, -0.0902357, 0.026720284, 0.0058673667, -0.03249893, 0.005629566, -0.033243187, -0.013395157, -0.0066261142, -0.012742623, -0.028868973, -0.011604789, -0.024817469, -0.06090461, 0.081365764, 0.018251315, 0.065133944, 0.029672742, -0.029624237, 0.007373278, -0.02779398, 0.07881554, -0.09364444, 0.011788737, -0.03306978, -0.06757514, -0.0075481716, -0.12835668, 0.01794214, 0.035493094, -0.025118379, 0.00937359, -0.064839, -0.032598037, 0.024818135, -0.078998335, -0.017180938, 0.062151734, -0.046501715, -0.08927812, 0.04950667, 0.061504167, 0.027341727, -0.0018225816, 0.052160572, 0.047882814, 0.013943688, 0.0045999037, 0.027996795, -0.013813083, -0.0019935952, -0.0068425853, 0.11311111, -0.0026992832, -0.016493924, -0.04418112, -0.00057715696, -0.077827044, -0.07003309, -0.10355045, -0.015734615, 0.036167942, 0.014831337, 0.08723817, 0.06974933, -0.03320681, -0.052084994, 0.026793856, 0.03224416, -0.03083215, -0.02936121, 0.017970955, 1.0009931E-32, -0.07540586, -0.040953893, -0.014978802, -0.020712268, -0.037676707, 0.060899913, -0.059535433, 0.090935245, -0.104427844, -0.034186255, -0.0027364914, 0.07125329, -0.076445825, 0.068130285, 0.04618232, -0.024334012, -0.02033701, -0.017687911, -0.061998025, -0.100348726, -0.009334153, 0.00049969106, 0.041866463, -0.037538208, 0.018114509, -0.021495841, 0.046746958, 0.0058532367, 0.011296849, 0.028661648, 0.0049967812, 0.021293236, -0.028552104, -0.028456422, -0.0599026, 0.025005618, -0.06596054, 0.008754479, -0.025867775, -0.022687117, 0.036053643, 0.003876931, -0.09278034, -0.033026353, -0.06273457, 0.10174492, 0.051962607, 0.039191462, -0.06228432, 0.0075851, -0.07110691, 0.013700966, -0.07137765, 0.021950072, -0.060872383, -0.027393285, -0.01005079, 0.032320708, 0.020342885, -0.04308101, -0.064905725, 0.085513756, 0.091484904, -0.09578084, -0.06072169, 0.051307295, 0.030827517, -0.059725273, -0.022251507, 0.056907013, -0.0143353185, 0.01682231, 0.03942171, 0.009771786, 0.024684055, 0.013501147, 0.011102638, 0.023086295, 0.047416065, -0.043554965, -0.013466956, -0.03939756, 0.03550251, 0.043990944, 0.081443265, -0.03936887, -0.03056774, -0.07734723, 0.018705979, -0.018674122, -0.05213852, 0.016079416, 0.0013432957, -0.043803815, -0.001535883, -1.1827393E-32, -0.0137260575, -0.024646465, 0.04492569, 0.023909671, 0.05241802, 0.0069492725, -0.02206733, -0.018109014, 0.04849452, 0.05216465, 0.004725988, 0.00040248936, 0.03372113, -0.03148689, 0.04448314, -0.0025778133, 0.013968759, -0.098832354, -0.033945054, -0.020057872, -0.0649255, 0.086504065, -0.06488163, 0.07598035, -0.031229896, -0.0011856352, 0.010302832, 0.016780293, -0.009518523, -0.05610782, -0.017297525, -0.076310195, -0.057853706, -0.012664431, -0.002802563, -0.033769906, -0.035152115, 0.09827526, -0.06848872, 0.17126998, -0.04850045, -0.08119668, 0.017509278, 0.07308132, -0.021054242, -0.073929265, 0.013704115, -0.026047455, 0.08734383, 0.047516704, 0.093356006, 0.07207601, -0.010212885, 0.042521104, -0.060549162, -0.008627061, 0.07652894, 0.004086818, 0.092982866, 0.034664012, 0.047986235, -0.030372808, -0.0019277794, -0.0055725854, -0.00093854935, -0.13218142, -0.004799824, -0.04036068, -0.01332664, -0.07887271, 0.004424336, -0.080561385, 0.002183817, -0.09268895, 0.038077876, -0.04770838, 0.019462451, 0.028333906, 0.1291994, 0.014144356, 0.019803585, 0.038429186, 0.09299551, 0.02284771, 0.00656607, 0.011994076, -0.07548806, 0.09850148, 0.0449726, 0.033237677, 0.04517508, 0.047070067, -0.05084374, 0.021842953, -0.102643825, -5.824915E-08, -0.021839086, -0.053250376, 0.031349853, 0.163075, 0.04408829, -0.046234075, 0.0065528154, 0.069606155, -0.07149129, -0.0030314971, 0.07431382, 0.013792589, -0.078140244, -0.002127636, -0.024354203, -0.009051566, 0.0080710845, 0.080780946, -0.02299891, 0.035973135, 0.025038972, 0.024075845, -0.03360756, 0.061703, 0.03919475, 0.005631174, -0.033111427, -0.0045225536, 0.06183132, 0.042251095, -0.02836628, 0.044246025, 0.016215265, -0.038777515, -0.003405004, -0.017433418, -0.042164356, 0.044445906, -0.06036227, 0.008551477, 0.12789138, -0.09689581, -0.04573304, 0.026402708, -0.0010394843, 0.004396332, 0.034547906, -0.1115681, -0.007983516, -0.01462107, -0.033586442, -0.074389204, 0.01087478, 0.064027674, 0.018943515, -0.06397476, -0.023299744, 0.03590389, -0.0037537157, -0.019096684, 0.1375304, -0.010479749, -0.08855874, 0.09941913
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "u"."Id", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "u"."UserId" = @__userId_0
ORDER BY "u"."Id", "v"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "u"."Id", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "u"."UserId" = @__userId_0
ORDER BY "u"."Id", "v"."Id"
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 9, 199, 64, 40, 124
Top 5 recommended vehicle IDs: 9, 199, 64, 40, 124
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Final recommendation list contains 5 vehicles.
Fetching recommendations for user ID: 1
Fetching recommendations for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 1
Generating user embedding for user ID 1
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated user embedding: 0.012381615, 0.02424476, -0.0042998665, 0.017042615, -0.0020894902, 0.07200975, 0.032271013, 0.07182269, -0.029239664, -0.036759317, -0.0018864581, -0.030657442, 0.021270648, 0.015404886, -0.0073412834, 0.0011804478, 0.018512618, -0.064599335, -0.043422125, 0.025321726, -0.030731173, -0.029803235, 0.005581431, -0.04871974, 0.0052061602, 0.0117026465, 0.04940428, 0.060820233, -0.065682486, -0.02674824, -0.008715481, 0.07471297, 0.005191677, -0.0027422032, -0.052547254, -0.20102224, -0.11696577, -0.004887981, -0.037225667, -0.03110717, -0.08579266, -0.071486115, -0.034202587, -0.03203518, -0.005058898, 0.015113555, 0.0061738575, 0.014395009, 0.09538121, 0.012448954, -0.032376945, -0.007698532, -0.03929896, -0.047328684, -0.004116015, -0.033269636, -0.0902357, 0.026720284, 0.0058673667, -0.03249893, 0.005629566, -0.033243187, -0.013395157, -0.0066261142, -0.012742623, -0.028868973, -0.011604789, -0.024817469, -0.06090461, 0.081365764, 0.018251315, 0.065133944, 0.029672742, -0.029624237, 0.007373278, -0.02779398, 0.07881554, -0.09364444, 0.011788737, -0.03306978, -0.06757514, -0.0075481716, -0.12835668, 0.01794214, 0.035493094, -0.025118379, 0.00937359, -0.064839, -0.032598037, 0.024818135, -0.078998335, -0.017180938, 0.062151734, -0.046501715, -0.08927812, 0.04950667, 0.061504167, 0.027341727, -0.0018225816, 0.052160572, 0.047882814, 0.013943688, 0.0045999037, 0.027996795, -0.013813083, -0.0019935952, -0.0068425853, 0.11311111, -0.0026992832, -0.016493924, -0.04418112, -0.00057715696, -0.077827044, -0.07003309, -0.10355045, -0.015734615, 0.036167942, 0.014831337, 0.08723817, 0.06974933, -0.03320681, -0.052084994, 0.026793856, 0.03224416, -0.03083215, -0.02936121, 0.017970955, 1.0009931E-32, -0.07540586, -0.040953893, -0.014978802, -0.020712268, -0.037676707, 0.060899913, -0.059535433, 0.090935245, -0.104427844, -0.034186255, -0.0027364914, 0.07125329, -0.076445825, 0.068130285, 0.04618232, -0.024334012, -0.02033701, -0.017687911, -0.061998025, -0.100348726, -0.009334153, 0.00049969106, 0.041866463, -0.037538208, 0.018114509, -0.021495841, 0.046746958, 0.0058532367, 0.011296849, 0.028661648, 0.0049967812, 0.021293236, -0.028552104, -0.028456422, -0.0599026, 0.025005618, -0.06596054, 0.008754479, -0.025867775, -0.022687117, 0.036053643, 0.003876931, -0.09278034, -0.033026353, -0.06273457, 0.10174492, 0.051962607, 0.039191462, -0.06228432, 0.0075851, -0.07110691, 0.013700966, -0.07137765, 0.021950072, -0.060872383, -0.027393285, -0.01005079, 0.032320708, 0.020342885, -0.04308101, -0.064905725, 0.085513756, 0.091484904, -0.09578084, -0.06072169, 0.051307295, 0.030827517, -0.059725273, -0.022251507, 0.056907013, -0.0143353185, 0.01682231, 0.03942171, 0.009771786, 0.024684055, 0.013501147, 0.011102638, 0.023086295, 0.047416065, -0.043554965, -0.013466956, -0.03939756, 0.03550251, 0.043990944, 0.081443265, -0.03936887, -0.03056774, -0.07734723, 0.018705979, -0.018674122, -0.05213852, 0.016079416, 0.0013432957, -0.043803815, -0.001535883, -1.1827393E-32, -0.0137260575, -0.024646465, 0.04492569, 0.023909671, 0.05241802, 0.0069492725, -0.02206733, -0.018109014, 0.04849452, 0.05216465, 0.004725988, 0.00040248936, 0.03372113, -0.03148689, 0.04448314, -0.0025778133, 0.013968759, -0.098832354, -0.033945054, -0.020057872, -0.0649255, 0.086504065, -0.06488163, 0.07598035, -0.031229896, -0.0011856352, 0.010302832, 0.016780293, -0.009518523, -0.05610782, -0.017297525, -0.076310195, -0.057853706, -0.012664431, -0.002802563, -0.033769906, -0.035152115, 0.09827526, -0.06848872, 0.17126998, -0.04850045, -0.08119668, 0.017509278, 0.07308132, -0.021054242, -0.073929265, 0.013704115, -0.026047455, 0.08734383, 0.047516704, 0.093356006, 0.07207601, -0.010212885, 0.042521104, -0.060549162, -0.008627061, 0.07652894, 0.004086818, 0.092982866, 0.034664012, 0.047986235, -0.030372808, -0.0019277794, -0.0055725854, -0.00093854935, -0.13218142, -0.004799824, -0.04036068, -0.01332664, -0.07887271, 0.004424336, -0.080561385, 0.002183817, -0.09268895, 0.038077876, -0.04770838, 0.019462451, 0.028333906, 0.1291994, 0.014144356, 0.019803585, 0.038429186, 0.09299551, 0.02284771, 0.00656607, 0.011994076, -0.07548806, 0.09850148, 0.0449726, 0.033237677, 0.04517508, 0.047070067, -0.05084374, 0.021842953, -0.102643825, -5.824915E-08, -0.021839086, -0.053250376, 0.031349853, 0.163075, 0.04408829, -0.046234075, 0.0065528154, 0.069606155, -0.07149129, -0.0030314971, 0.07431382, 0.013792589, -0.078140244, -0.002127636, -0.024354203, -0.009051566, 0.0080710845, 0.080780946, -0.02299891, 0.035973135, 0.025038972, 0.024075845, -0.03360756, 0.061703, 0.03919475, 0.005631174, -0.033111427, -0.0045225536, 0.06183132, 0.042251095, -0.02836628, 0.044246025, 0.016215265, -0.038777515, -0.003405004, -0.017433418, -0.042164356, 0.044445906, -0.06036227, 0.008551477, 0.12789138, -0.09689581, -0.04573304, 0.026402708, -0.0010394843, 0.004396332, 0.034547906, -0.1115681, -0.007983516, -0.01462107, -0.033586442, -0.074389204, 0.01087478, 0.064027674, 0.018943515, -0.06397476, -0.023299744, 0.03590389, -0.0037537157, -0.019096684, 0.1375304, -0.010479749, -0.08855874, 0.09941913
Generating vehicle embeddings...
Generated user embedding: 0.012381615, 0.02424476, -0.0042998665, 0.017042615, -0.0020894902, 0.07200975, 0.032271013, 0.07182269, -0.029239664, -0.036759317, -0.0018864581, -0.030657442, 0.021270648, 0.015404886, -0.0073412834, 0.0011804478, 0.018512618, -0.064599335, -0.043422125, 0.025321726, -0.030731173, -0.029803235, 0.005581431, -0.04871974, 0.0052061602, 0.0117026465, 0.04940428, 0.060820233, -0.065682486, -0.02674824, -0.008715481, 0.07471297, 0.005191677, -0.0027422032, -0.052547254, -0.20102224, -0.11696577, -0.004887981, -0.037225667, -0.03110717, -0.08579266, -0.071486115, -0.034202587, -0.03203518, -0.005058898, 0.015113555, 0.0061738575, 0.014395009, 0.09538121, 0.012448954, -0.032376945, -0.007698532, -0.03929896, -0.047328684, -0.004116015, -0.033269636, -0.0902357, 0.026720284, 0.0058673667, -0.03249893, 0.005629566, -0.033243187, -0.013395157, -0.0066261142, -0.012742623, -0.028868973, -0.011604789, -0.024817469, -0.06090461, 0.081365764, 0.018251315, 0.065133944, 0.029672742, -0.029624237, 0.007373278, -0.02779398, 0.07881554, -0.09364444, 0.011788737, -0.03306978, -0.06757514, -0.0075481716, -0.12835668, 0.01794214, 0.035493094, -0.025118379, 0.00937359, -0.064839, -0.032598037, 0.024818135, -0.078998335, -0.017180938, 0.062151734, -0.046501715, -0.08927812, 0.04950667, 0.061504167, 0.027341727, -0.0018225816, 0.052160572, 0.047882814, 0.013943688, 0.0045999037, 0.027996795, -0.013813083, -0.0019935952, -0.0068425853, 0.11311111, -0.0026992832, -0.016493924, -0.04418112, -0.00057715696, -0.077827044, -0.07003309, -0.10355045, -0.015734615, 0.036167942, 0.014831337, 0.08723817, 0.06974933, -0.03320681, -0.052084994, 0.026793856, 0.03224416, -0.03083215, -0.02936121, 0.017970955, 1.0009931E-32, -0.07540586, -0.040953893, -0.014978802, -0.020712268, -0.037676707, 0.060899913, -0.059535433, 0.090935245, -0.104427844, -0.034186255, -0.0027364914, 0.07125329, -0.076445825, 0.068130285, 0.04618232, -0.024334012, -0.02033701, -0.017687911, -0.061998025, -0.100348726, -0.009334153, 0.00049969106, 0.041866463, -0.037538208, 0.018114509, -0.021495841, 0.046746958, 0.0058532367, 0.011296849, 0.028661648, 0.0049967812, 0.021293236, -0.028552104, -0.028456422, -0.0599026, 0.025005618, -0.06596054, 0.008754479, -0.025867775, -0.022687117, 0.036053643, 0.003876931, -0.09278034, -0.033026353, -0.06273457, 0.10174492, 0.051962607, 0.039191462, -0.06228432, 0.0075851, -0.07110691, 0.013700966, -0.07137765, 0.021950072, -0.060872383, -0.027393285, -0.01005079, 0.032320708, 0.020342885, -0.04308101, -0.064905725, 0.085513756, 0.091484904, -0.09578084, -0.06072169, 0.051307295, 0.030827517, -0.059725273, -0.022251507, 0.056907013, -0.0143353185, 0.01682231, 0.03942171, 0.009771786, 0.024684055, 0.013501147, 0.011102638, 0.023086295, 0.047416065, -0.043554965, -0.013466956, -0.03939756, 0.03550251, 0.043990944, 0.081443265, -0.03936887, -0.03056774, -0.07734723, 0.018705979, -0.018674122, -0.05213852, 0.016079416, 0.0013432957, -0.043803815, -0.001535883, -1.1827393E-32, -0.0137260575, -0.024646465, 0.04492569, 0.023909671, 0.05241802, 0.0069492725, -0.02206733, -0.018109014, 0.04849452, 0.05216465, 0.004725988, 0.00040248936, 0.03372113, -0.03148689, 0.04448314, -0.0025778133, 0.013968759, -0.098832354, -0.033945054, -0.020057872, -0.0649255, 0.086504065, -0.06488163, 0.07598035, -0.031229896, -0.0011856352, 0.010302832, 0.016780293, -0.009518523, -0.05610782, -0.017297525, -0.076310195, -0.057853706, -0.012664431, -0.002802563, -0.033769906, -0.035152115, 0.09827526, -0.06848872, 0.17126998, -0.04850045, -0.08119668, 0.017509278, 0.07308132, -0.021054242, -0.073929265, 0.013704115, -0.026047455, 0.08734383, 0.047516704, 0.093356006, 0.07207601, -0.010212885, 0.042521104, -0.060549162, -0.008627061, 0.07652894, 0.004086818, 0.092982866, 0.034664012, 0.047986235, -0.030372808, -0.0019277794, -0.0055725854, -0.00093854935, -0.13218142, -0.004799824, -0.04036068, -0.01332664, -0.07887271, 0.004424336, -0.080561385, 0.002183817, -0.09268895, 0.038077876, -0.04770838, 0.019462451, 0.028333906, 0.1291994, 0.014144356, 0.019803585, 0.038429186, 0.09299551, 0.02284771, 0.00656607, 0.011994076, -0.07548806, 0.09850148, 0.0449726, 0.033237677, 0.04517508, 0.047070067, -0.05084374, 0.021842953, -0.102643825, -5.824915E-08, -0.021839086, -0.053250376, 0.031349853, 0.163075, 0.04408829, -0.046234075, 0.0065528154, 0.069606155, -0.07149129, -0.0030314971, 0.07431382, 0.013792589, -0.078140244, -0.002127636, -0.024354203, -0.009051566, 0.0080710845, 0.080780946, -0.02299891, 0.035973135, 0.025038972, 0.024075845, -0.03360756, 0.061703, 0.03919475, 0.005631174, -0.033111427, -0.0045225536, 0.06183132, 0.042251095, -0.02836628, 0.044246025, 0.016215265, -0.038777515, -0.003405004, -0.017433418, -0.042164356, 0.044445906, -0.06036227, 0.008551477, 0.12789138, -0.09689581, -0.04573304, 0.026402708, -0.0010394843, 0.004396332, 0.034547906, -0.1115681, -0.007983516, -0.01462107, -0.033586442, -0.074389204, 0.01087478, 0.064027674, 0.018943515, -0.06397476, -0.023299744, 0.03590389, -0.0037537157, -0.019096684, 0.1375304, -0.010479749, -0.08855874, 0.09941913
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Top 5 recommended vehicle IDs: 9, 199, 64, 40, 124
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 9, 199, 64, 40, 124
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Final recommendation list contains 5 vehicles.
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 63), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 1
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: -0.021283537, 0.022407468, -0.004592257, 0.010512684, 0.037427418, 0.058972046, -0.006208157, 0.09593415, -0.05693603, -0.042327087, -0.0055314507, -0.06886347, 0.013807403, 0.020392919, 0.02008333, 0.0063532023, 0.033206422, -0.07552366, -0.06813462, 0.013291235, 0.033482853, 0.006773734, 0.01653649, -0.06930561, -0.031321924, -0.032421634, 0.009433248, 0.059224617, -0.07701513, -0.038063217, -0.013104102, 0.05581644, 0.0048836046, 0.03357538, -0.0067910473, -0.1478889, -0.09183119, 0.0005824053, -0.023243949, -0.057998158, -0.091342896, -0.054445855, -0.079598576, -0.02858487, -0.0016909229, 0.0038331342, 0.01663714, -0.01660909, 0.08136349, -0.021214249, -0.055459928, 0.004965445, -0.013264215, -0.019559888, -0.0045857267, -0.05791684, -0.07771869, 0.001973684, 0.0021704657, -0.037755817, 0.027716514, -0.05086382, 0.0027066204, -0.044814426, -0.048709244, -0.0588634, 0.00057113194, -0.020759206, -0.013757657, 0.022788888, 0.045756493, 0.037323534, -0.017165773, -0.02487692, -0.033113364, -0.020256966, 0.047003657, -0.06779152, 0.0043880404, -0.030375574, -0.07838682, -0.03903202, -0.11460866, 0.00016420257, 0.05590917, -0.009778665, 0.009297895, -0.085508406, -0.034556493, 0.04329251, -0.035649378, -0.0053632325, 0.06444083, -0.018027108, -0.027681202, 0.06443983, 0.10016777, 0.0030990248, -0.013925253, 0.027508175, 0.032764032, 0.012529465, -0.019894158, -0.035349786, -0.032695565, 0.02782814, -0.005740548, 0.109493904, 0.03760472, -0.043109436, -0.02914268, 0.009204832, -0.0829175, -0.08585863, -0.13507164, 0.005005683, 0.067894004, -0.022705818, 0.101444155, 0.06133942, -0.046191707, -0.026471213, 0.025083845, 0.03842846, 0.01565199, -0.02538876, -0.0043724733, 9.521114E-33, -0.063831404, 0.009854128, -0.008610604, -0.02941509, -0.075572155, 0.030625045, -0.032159418, 0.105705045, -0.085945085, -0.03889555, -0.015335016, 0.05937822, -0.014943316, 0.03409649, -0.006496686, -0.033841897, -0.003260908, -0.076803364, -0.03089564, -0.07832127, 0.01523992, -0.023583276, 0.0605266, -0.03483535, 0.032366514, -0.008572163, 0.030992229, -0.045050368, 0.031050824, 0.044618923, -0.015930064, 0.0069319215, -0.075864896, 0.015375181, -0.04685412, 0.03774038, -0.0658211, 0.003831211, -0.048571073, -0.049564015, 0.061185963, 0.010152429, -0.10521075, -0.024991825, -0.048573073, 0.050902233, -0.00065291446, 0.029939692, -0.004615873, 0.051870458, -0.06730525, 0.013353816, -0.055738572, 0.015334091, -0.024682214, 0.02911491, -0.011162563, 0.046404887, 0.00072544743, -0.019798024, -0.07021705, 0.07102037, 0.056378953, -0.057719238, -0.065053344, 0.022817438, 0.031913493, -0.019703899, -0.0004142677, 0.03312374, 0.008183336, -0.029560775, 0.046229653, -0.006714407, 0.061433163, 0.009518966, -0.01671108, 0.03099649, 0.06106242, -0.02749778, 0.009775014, -0.014488957, 0.019175954, 0.0133086555, 0.08633503, -0.0458715, -0.030479142, -0.04223409, 0.024392312, -0.014958201, -0.009726992, 0.032384142, -0.029416762, -0.025314985, -0.026945515, -1.06361616E-32, -0.0021784906, -0.059460633, 0.05394351, 0.020731907, 0.08560492, 0.0029375607, -0.044958238, -0.06379851, 0.063497186, 0.050771788, -0.012246359, -0.0010934417, 0.044358518, -0.04998136, 0.011059266, 0.026659347, -0.037225887, -0.076516464, -0.0023176605, 0.014025279, -0.07002696, 0.09198785, -0.082556814, 0.053999178, -0.0392814, 0.019019185, -0.016920872, 0.03573589, 0.031949993, -0.051271237, -0.0034922005, -0.042679876, -0.09064525, -0.0133876605, -0.030720247, -0.04358156, -0.014385348, 0.11380478, -0.06847955, 0.17132793, -0.011696515, -0.07444688, 0.009166033, 0.06595218, -0.028142406, -0.08232198, 0.0007978301, -0.015353418, 0.073352285, 0.100738935, 0.10069092, 0.050480783, -0.01271734, 0.034655306, -0.022739558, -0.024380555, 0.059113584, 0.040566176, 0.041254193, 0.03010404, 0.052373383, 0.003300445, 0.014420793, 0.01806337, 0.016986724, -0.17324062, 0.048644707, -0.066547096, 0.0025819498, -0.117562555, -0.015663547, -0.051485818, 0.003033813, -0.050617713, 0.020880809, -0.02632078, 0.060350083, -0.0033164672, 0.108201236, -0.026839541, 0.05032922, 0.076036364, 0.06033419, 0.017091358, 0.029867262, 0.01066183, -0.057231657, 0.10863567, 0.03591711, 0.015953047, 0.05685709, 0.026556667, -0.03894365, 0.051729426, -0.08486992, -5.874337E-08, 0.043851286, 0.023871232, 0.027440045, 0.113592595, 0.081573695, -0.035622872, 0.0043441895, 0.07926517, -0.049997456, -0.028816216, 0.10373573, 0.024978448, -0.04834917, -0.014178775, -0.015063805, -0.04891646, -0.004782089, 0.030304775, -0.030733071, 0.0128438445, -0.011279844, 0.03636807, -0.07364603, 0.06083504, 0.07489065, -0.005668553, 0.0065389653, -8.16294E-05, 0.03737988, 0.00013407743, -0.045585975, 0.05017685, 0.04723355, -0.01290819, -0.002433259, -0.041587155, -0.042638406, 0.027155071, -0.107041076, -0.012807644, 0.13598894, -0.05300389, -0.013161754, -0.0025999756, -0.013104482, 0.0120249875, 0.0006444192, -0.11961767, 0.035146993, 0.03180744, -0.07677275, -0.11396554, 0.01828137, 0.08675887, -0.033909824, 0.044158753, -0.05902494, 0.028493786, 0.035956174, -0.061474457, 0.17288025, -0.006449145, -0.08626909, 0.111705065
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 42, 9, 199, 132, 64
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Fetching recommendations for user ID: 1
Fetching recommendations for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 1
Calling local embedding service
Generating user embedding for user ID 1
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.012381615, 0.02424476, -0.0042998665, 0.017042615, -0.0020894902, 0.07200975, 0.032271013, 0.07182269, -0.029239664, -0.036759317, -0.0018864581, -0.030657442, 0.021270648, 0.015404886, -0.0073412834, 0.0011804478, 0.018512618, -0.064599335, -0.043422125, 0.025321726, -0.030731173, -0.029803235, 0.005581431, -0.04871974, 0.0052061602, 0.0117026465, 0.04940428, 0.060820233, -0.065682486, -0.02674824, -0.008715481, 0.07471297, 0.005191677, -0.0027422032, -0.052547254, -0.20102224, -0.11696577, -0.004887981, -0.037225667, -0.03110717, -0.08579266, -0.071486115, -0.034202587, -0.03203518, -0.005058898, 0.015113555, 0.0061738575, 0.014395009, 0.09538121, 0.012448954, -0.032376945, -0.007698532, -0.03929896, -0.047328684, -0.004116015, -0.033269636, -0.0902357, 0.026720284, 0.0058673667, -0.03249893, 0.005629566, -0.033243187, -0.013395157, -0.0066261142, -0.012742623, -0.028868973, -0.011604789, -0.024817469, -0.06090461, 0.081365764, 0.018251315, 0.065133944, 0.029672742, -0.029624237, 0.007373278, -0.02779398, 0.07881554, -0.09364444, 0.011788737, -0.03306978, -0.06757514, -0.0075481716, -0.12835668, 0.01794214, 0.035493094, -0.025118379, 0.00937359, -0.064839, -0.032598037, 0.024818135, -0.078998335, -0.017180938, 0.062151734, -0.046501715, -0.08927812, 0.04950667, 0.061504167, 0.027341727, -0.0018225816, 0.052160572, 0.047882814, 0.013943688, 0.0045999037, 0.027996795, -0.013813083, -0.0019935952, -0.0068425853, 0.11311111, -0.0026992832, -0.016493924, -0.04418112, -0.00057715696, -0.077827044, -0.07003309, -0.10355045, -0.015734615, 0.036167942, 0.014831337, 0.08723817, 0.06974933, -0.03320681, -0.052084994, 0.026793856, 0.03224416, -0.03083215, -0.02936121, 0.017970955, 1.0009931E-32, -0.07540586, -0.040953893, -0.014978802, -0.020712268, -0.037676707, 0.060899913, -0.059535433, 0.090935245, -0.104427844, -0.034186255, -0.0027364914, 0.07125329, -0.076445825, 0.068130285, 0.04618232, -0.024334012, -0.02033701, -0.017687911, -0.061998025, -0.100348726, -0.009334153, 0.00049969106, 0.041866463, -0.037538208, 0.018114509, -0.021495841, 0.046746958, 0.0058532367, 0.011296849, 0.028661648, 0.0049967812, 0.021293236, -0.028552104, -0.028456422, -0.0599026, 0.025005618, -0.06596054, 0.008754479, -0.025867775, -0.022687117, 0.036053643, 0.003876931, -0.09278034, -0.033026353, -0.06273457, 0.10174492, 0.051962607, 0.039191462, -0.06228432, 0.0075851, -0.07110691, 0.013700966, -0.07137765, 0.021950072, -0.060872383, -0.027393285, -0.01005079, 0.032320708, 0.020342885, -0.04308101, -0.064905725, 0.085513756, 0.091484904, -0.09578084, -0.06072169, 0.051307295, 0.030827517, -0.059725273, -0.022251507, 0.056907013, -0.0143353185, 0.01682231, 0.03942171, 0.009771786, 0.024684055, 0.013501147, 0.011102638, 0.023086295, 0.047416065, -0.043554965, -0.013466956, -0.03939756, 0.03550251, 0.043990944, 0.081443265, -0.03936887, -0.03056774, -0.07734723, 0.018705979, -0.018674122, -0.05213852, 0.016079416, 0.0013432957, -0.043803815, -0.001535883, -1.1827393E-32, -0.0137260575, -0.024646465, 0.04492569, 0.023909671, 0.05241802, 0.0069492725, -0.02206733, -0.018109014, 0.04849452, 0.05216465, 0.004725988, 0.00040248936, 0.03372113, -0.03148689, 0.04448314, -0.0025778133, 0.013968759, -0.098832354, -0.033945054, -0.020057872, -0.0649255, 0.086504065, -0.06488163, 0.07598035, -0.031229896, -0.0011856352, 0.010302832, 0.016780293, -0.009518523, -0.05610782, -0.017297525, -0.076310195, -0.057853706, -0.012664431, -0.002802563, -0.033769906, -0.035152115, 0.09827526, -0.06848872, 0.17126998, -0.04850045, -0.08119668, 0.017509278, 0.07308132, -0.021054242, -0.073929265, 0.013704115, -0.026047455, 0.08734383, 0.047516704, 0.093356006, 0.07207601, -0.010212885, 0.042521104, -0.060549162, -0.008627061, 0.07652894, 0.004086818, 0.092982866, 0.034664012, 0.047986235, -0.030372808, -0.0019277794, -0.0055725854, -0.00093854935, -0.13218142, -0.004799824, -0.04036068, -0.01332664, -0.07887271, 0.004424336, -0.080561385, 0.002183817, -0.09268895, 0.038077876, -0.04770838, 0.019462451, 0.028333906, 0.1291994, 0.014144356, 0.019803585, 0.038429186, 0.09299551, 0.02284771, 0.00656607, 0.011994076, -0.07548806, 0.09850148, 0.0449726, 0.033237677, 0.04517508, 0.047070067, -0.05084374, 0.021842953, -0.102643825, -5.824915E-08, -0.021839086, -0.053250376, 0.031349853, 0.163075, 0.04408829, -0.046234075, 0.0065528154, 0.069606155, -0.07149129, -0.0030314971, 0.07431382, 0.013792589, -0.078140244, -0.002127636, -0.024354203, -0.009051566, 0.0080710845, 0.080780946, -0.02299891, 0.035973135, 0.025038972, 0.024075845, -0.03360756, 0.061703, 0.03919475, 0.005631174, -0.033111427, -0.0045225536, 0.06183132, 0.042251095, -0.02836628, 0.044246025, 0.016215265, -0.038777515, -0.003405004, -0.017433418, -0.042164356, 0.044445906, -0.06036227, 0.008551477, 0.12789138, -0.09689581, -0.04573304, 0.026402708, -0.0010394843, 0.004396332, 0.034547906, -0.1115681, -0.007983516, -0.01462107, -0.033586442, -0.074389204, 0.01087478, 0.064027674, 0.018943515, -0.06397476, -0.023299744, 0.03590389, -0.0037537157, -0.019096684, 0.1375304, -0.010479749, -0.08855874, 0.09941913
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.012381615, 0.02424476, -0.0042998665, 0.017042615, -0.0020894902, 0.07200975, 0.032271013, 0.07182269, -0.029239664, -0.036759317, -0.0018864581, -0.030657442, 0.021270648, 0.015404886, -0.0073412834, 0.0011804478, 0.018512618, -0.064599335, -0.043422125, 0.025321726, -0.030731173, -0.029803235, 0.005581431, -0.04871974, 0.0052061602, 0.0117026465, 0.04940428, 0.060820233, -0.065682486, -0.02674824, -0.008715481, 0.07471297, 0.005191677, -0.0027422032, -0.052547254, -0.20102224, -0.11696577, -0.004887981, -0.037225667, -0.03110717, -0.08579266, -0.071486115, -0.034202587, -0.03203518, -0.005058898, 0.015113555, 0.0061738575, 0.014395009, 0.09538121, 0.012448954, -0.032376945, -0.007698532, -0.03929896, -0.047328684, -0.004116015, -0.033269636, -0.0902357, 0.026720284, 0.0058673667, -0.03249893, 0.005629566, -0.033243187, -0.013395157, -0.0066261142, -0.012742623, -0.028868973, -0.011604789, -0.024817469, -0.06090461, 0.081365764, 0.018251315, 0.065133944, 0.029672742, -0.029624237, 0.007373278, -0.02779398, 0.07881554, -0.09364444, 0.011788737, -0.03306978, -0.06757514, -0.0075481716, -0.12835668, 0.01794214, 0.035493094, -0.025118379, 0.00937359, -0.064839, -0.032598037, 0.024818135, -0.078998335, -0.017180938, 0.062151734, -0.046501715, -0.08927812, 0.04950667, 0.061504167, 0.027341727, -0.0018225816, 0.052160572, 0.047882814, 0.013943688, 0.0045999037, 0.027996795, -0.013813083, -0.0019935952, -0.0068425853, 0.11311111, -0.0026992832, -0.016493924, -0.04418112, -0.00057715696, -0.077827044, -0.07003309, -0.10355045, -0.015734615, 0.036167942, 0.014831337, 0.08723817, 0.06974933, -0.03320681, -0.052084994, 0.026793856, 0.03224416, -0.03083215, -0.02936121, 0.017970955, 1.0009931E-32, -0.07540586, -0.040953893, -0.014978802, -0.020712268, -0.037676707, 0.060899913, -0.059535433, 0.090935245, -0.104427844, -0.034186255, -0.0027364914, 0.07125329, -0.076445825, 0.068130285, 0.04618232, -0.024334012, -0.02033701, -0.017687911, -0.061998025, -0.100348726, -0.009334153, 0.00049969106, 0.041866463, -0.037538208, 0.018114509, -0.021495841, 0.046746958, 0.0058532367, 0.011296849, 0.028661648, 0.0049967812, 0.021293236, -0.028552104, -0.028456422, -0.0599026, 0.025005618, -0.06596054, 0.008754479, -0.025867775, -0.022687117, 0.036053643, 0.003876931, -0.09278034, -0.033026353, -0.06273457, 0.10174492, 0.051962607, 0.039191462, -0.06228432, 0.0075851, -0.07110691, 0.013700966, -0.07137765, 0.021950072, -0.060872383, -0.027393285, -0.01005079, 0.032320708, 0.020342885, -0.04308101, -0.064905725, 0.085513756, 0.091484904, -0.09578084, -0.06072169, 0.051307295, 0.030827517, -0.059725273, -0.022251507, 0.056907013, -0.0143353185, 0.01682231, 0.03942171, 0.009771786, 0.024684055, 0.013501147, 0.011102638, 0.023086295, 0.047416065, -0.043554965, -0.013466956, -0.03939756, 0.03550251, 0.043990944, 0.081443265, -0.03936887, -0.03056774, -0.07734723, 0.018705979, -0.018674122, -0.05213852, 0.016079416, 0.0013432957, -0.043803815, -0.001535883, -1.1827393E-32, -0.0137260575, -0.024646465, 0.04492569, 0.023909671, 0.05241802, 0.0069492725, -0.02206733, -0.018109014, 0.04849452, 0.05216465, 0.004725988, 0.00040248936, 0.03372113, -0.03148689, 0.04448314, -0.0025778133, 0.013968759, -0.098832354, -0.033945054, -0.020057872, -0.0649255, 0.086504065, -0.06488163, 0.07598035, -0.031229896, -0.0011856352, 0.010302832, 0.016780293, -0.009518523, -0.05610782, -0.017297525, -0.076310195, -0.057853706, -0.012664431, -0.002802563, -0.033769906, -0.035152115, 0.09827526, -0.06848872, 0.17126998, -0.04850045, -0.08119668, 0.017509278, 0.07308132, -0.021054242, -0.073929265, 0.013704115, -0.026047455, 0.08734383, 0.047516704, 0.093356006, 0.07207601, -0.010212885, 0.042521104, -0.060549162, -0.008627061, 0.07652894, 0.004086818, 0.092982866, 0.034664012, 0.047986235, -0.030372808, -0.0019277794, -0.0055725854, -0.00093854935, -0.13218142, -0.004799824, -0.04036068, -0.01332664, -0.07887271, 0.004424336, -0.080561385, 0.002183817, -0.09268895, 0.038077876, -0.04770838, 0.019462451, 0.028333906, 0.1291994, 0.014144356, 0.019803585, 0.038429186, 0.09299551, 0.02284771, 0.00656607, 0.011994076, -0.07548806, 0.09850148, 0.0449726, 0.033237677, 0.04517508, 0.047070067, -0.05084374, 0.021842953, -0.102643825, -5.824915E-08, -0.021839086, -0.053250376, 0.031349853, 0.163075, 0.04408829, -0.046234075, 0.0065528154, 0.069606155, -0.07149129, -0.0030314971, 0.07431382, 0.013792589, -0.078140244, -0.002127636, -0.024354203, -0.009051566, 0.0080710845, 0.080780946, -0.02299891, 0.035973135, 0.025038972, 0.024075845, -0.03360756, 0.061703, 0.03919475, 0.005631174, -0.033111427, -0.0045225536, 0.06183132, 0.042251095, -0.02836628, 0.044246025, 0.016215265, -0.038777515, -0.003405004, -0.017433418, -0.042164356, 0.044445906, -0.06036227, 0.008551477, 0.12789138, -0.09689581, -0.04573304, 0.026402708, -0.0010394843, 0.004396332, 0.034547906, -0.1115681, -0.007983516, -0.01462107, -0.033586442, -0.074389204, 0.01087478, 0.064027674, 0.018943515, -0.06397476, -0.023299744, 0.03590389, -0.0037537157, -0.019096684, 0.1375304, -0.010479749, -0.08855874, 0.09941913
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 9, 199, 64, 40, 124
Top 5 recommended vehicle IDs: 9, 199, 64, 40, 124
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (2ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Final recommendation list contains 5 vehicles.
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 1
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: -0.009723455, 0.013773421, -0.00070102565, 0.019010618, 0.03277275, 0.05395942, -0.03178226, 0.10137015, -0.047426593, -0.038106825, 0.0024223265, -0.05194637, 0.0029236728, 0.03552497, 0.006650449, -0.0038591048, 0.053543836, -0.07432549, -0.0568682, -0.0006499956, 0.00028594205, -0.0015675734, 0.015984114, -0.041083448, -0.026361788, -0.03738368, -0.00038952567, 0.033494662, -0.074163444, -0.037546117, -0.016532674, 0.08010897, -0.03854672, 0.032645702, 0.031528264, -0.15080085, -0.08019939, 0.019117592, -0.024092693, -0.049526256, -0.09978983, -0.058781005, -0.1027898, -0.03957557, -0.013932428, -0.0055876225, 0.012852018, 0.0008850333, 0.07586069, 0.007801207, -0.041108023, 0.005850265, -0.018660102, -0.013122708, -0.013358498, -0.07350835, -0.08847309, -0.00046627593, 0.0038242512, -0.04225795, 0.028683623, -0.043055333, 0.00046015295, -0.048767645, -0.05309129, -0.07418738, 0.01210707, -0.022211539, -0.02156119, 0.04151216, 0.050124995, 0.055330697, -0.0066080736, 0.0077483105, 0.0038825418, -0.036599733, 0.09074027, -0.066880465, 0.019295098, -0.008677059, -0.06611051, -0.03665132, -0.12359475, -0.0073011066, 0.035076745, -0.041912008, -0.0034008946, -0.09565672, 0.0030905458, 0.0228356, -0.050802384, 0.0028331869, 0.049943272, -0.032754555, -0.052906945, 0.051648814, 0.116678685, 0.028499138, -0.007495748, 0.043297656, 0.025677996, 0.0011029979, 0.00848851, -0.0030891758, -0.021843782, 0.02362122, -0.002505516, 0.12244418, 0.022462681, -0.04394167, -0.03291517, -0.00063146476, -0.061558988, -0.09650821, -0.1389294, -0.0110995, 0.045395322, -0.047674194, 0.07193644, 0.057258613, -0.06386574, -0.03616374, 0.033697106, 0.018796064, 0.022768572, -0.04395349, -0.026026184, 1.10882766E-32, -0.05498042, 0.020139078, -0.029961424, -0.03304553, -0.0938538, 0.006285323, -0.03268657, 0.0817623, -0.08184853, -0.03038831, -0.046723638, 0.034175973, -0.06734748, 0.02500788, 0.028644191, -0.04080145, -0.0018043995, -0.06488116, -0.027169455, -0.07506983, -0.020309744, 0.00907269, 0.0465074, -0.046748873, 0.008769791, -0.010403641, 0.045254026, -0.056595594, 0.019044943, 0.053000327, -0.02763169, 0.0007831459, -0.045067772, 0.0023248538, -0.052401513, 0.012224369, -0.12951939, -0.005291923, -0.052269135, -0.021509003, 0.06280499, 0.025192225, -0.10808034, -0.02853702, -0.033354357, 0.040159184, 0.019655734, 0.03478862, -0.0132995825, 0.020590592, -0.07433196, 0.030888736, -0.07983398, 0.03289976, -0.040775634, 0.0014549755, 0.013943507, 0.009457607, 0.014779641, -0.0071578757, -0.05362862, 0.045293614, 0.046742737, -0.07471096, -0.0635429, -0.0131791085, 0.028568063, -0.01868463, -0.028067997, 0.025363274, 0.0053561586, 0.007365332, 0.078284934, -0.01460648, 0.083917946, -0.0019119062, 0.029463926, 0.04650516, 0.06650034, -0.03302198, -0.0014355223, 0.0026704255, 0.016924225, 0.03728976, 0.07942276, -0.04493823, -0.028136574, -0.060494747, 0.0094891805, -0.0087549295, -0.038504347, 0.012893153, -0.041011587, -0.03638438, 0.009024743, -1.2255271E-32, 0.004729374, -0.039158188, 0.053262487, 0.011272858, 0.089511335, 0.03554817, -0.039137747, -0.06933866, 0.028899334, 0.05669439, -0.01917821, 0.0210214, 0.05198931, -0.023719499, -0.0191186, 0.017722713, 0.012984217, -0.095096916, -0.007366522, -0.015085072, -0.036893066, 0.10401821, -0.07483213, 0.04778758, -0.05301478, -0.0087578455, -0.030959915, 0.06811304, 0.014933687, -0.025815351, -0.010045254, -0.05422239, -0.051793784, -0.006289061, 0.016474739, -0.02828842, -0.011848788, 0.10756757, -0.076119654, 0.15496181, -0.020890871, -0.07667923, 0.011378906, 0.07175815, -0.022756116, -0.07692666, 0.011771471, -0.051861055, 0.10655223, 0.067869484, 0.11376994, 0.053242814, -0.0074227913, 0.05392033, -0.026502378, -0.0009256198, 0.045084797, 0.060203463, 0.06914173, 0.05269031, 0.061909918, 0.014751535, -0.0009165712, -0.010783923, 0.03354416, -0.14831483, 0.04151718, -0.0621888, -0.0027217355, -0.08374972, 0.0023733512, -0.060182046, 0.018159302, -0.041726235, 0.039112225, -0.042759098, 0.057414014, 0.017504381, 0.11848568, 0.0046815593, 0.046057016, 0.05456533, 0.05956901, 0.015537034, 0.031961147, 0.011041588, -0.067451835, 0.09849958, 0.002715901, 0.022944937, 0.03914331, 0.02712705, -0.02059175, 0.050690655, -0.079788536, -6.258667E-08, 0.036047332, 0.0076169632, 0.015804278, 0.13405557, 0.065826915, -0.045707118, -9.690941E-05, 0.08581235, -0.05022998, -0.0173248, 0.089389585, 0.008399185, -0.0535702, -0.0028253351, -0.01937822, -0.037226908, -0.0336309, 0.049086954, -0.032899223, -0.035234742, -0.007782188, 0.049803276, -0.05507395, 0.06430307, 0.043431282, -0.011871099, 0.010702642, -0.012209191, 0.059712052, -0.022220843, -0.05680951, 0.06372889, 0.012728358, -0.03288467, 0.0060358695, -0.011818792, -0.051762942, 0.06301031, -0.10258551, 0.025288513, 0.13150753, -0.051388606, -0.037197515, -0.0036514797, 0.03153814, 0.02283557, -0.01119894, -0.11992761, 0.007673716, 0.0124446405, -0.05474499, -0.09486324, 0.007916942, 0.10057094, -0.020497026, -0.0018482577, -0.054378647, 0.023854671, 0.019024964, -0.017724184, 0.16796976, -0.013756745, -0.0687637, 0.11797952
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 42, 40, 199, 9, 132
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Fetching recommendations for user ID: 1
Fetching recommendations for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 1
Calling local embedding service
Generating user embedding for user ID 1
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.012381615, 0.02424476, -0.0042998665, 0.017042615, -0.0020894902, 0.07200975, 0.032271013, 0.07182269, -0.029239664, -0.036759317, -0.0018864581, -0.030657442, 0.021270648, 0.015404886, -0.0073412834, 0.0011804478, 0.018512618, -0.064599335, -0.043422125, 0.025321726, -0.030731173, -0.029803235, 0.005581431, -0.04871974, 0.0052061602, 0.0117026465, 0.04940428, 0.060820233, -0.065682486, -0.02674824, -0.008715481, 0.07471297, 0.005191677, -0.0027422032, -0.052547254, -0.20102224, -0.11696577, -0.004887981, -0.037225667, -0.03110717, -0.08579266, -0.071486115, -0.034202587, -0.03203518, -0.005058898, 0.015113555, 0.0061738575, 0.014395009, 0.09538121, 0.012448954, -0.032376945, -0.007698532, -0.03929896, -0.047328684, -0.004116015, -0.033269636, -0.0902357, 0.026720284, 0.0058673667, -0.03249893, 0.005629566, -0.033243187, -0.013395157, -0.0066261142, -0.012742623, -0.028868973, -0.011604789, -0.024817469, -0.06090461, 0.081365764, 0.018251315, 0.065133944, 0.029672742, -0.029624237, 0.007373278, -0.02779398, 0.07881554, -0.09364444, 0.011788737, -0.03306978, -0.06757514, -0.0075481716, -0.12835668, 0.01794214, 0.035493094, -0.025118379, 0.00937359, -0.064839, -0.032598037, 0.024818135, -0.078998335, -0.017180938, 0.062151734, -0.046501715, -0.08927812, 0.04950667, 0.061504167, 0.027341727, -0.0018225816, 0.052160572, 0.047882814, 0.013943688, 0.0045999037, 0.027996795, -0.013813083, -0.0019935952, -0.0068425853, 0.11311111, -0.0026992832, -0.016493924, -0.04418112, -0.00057715696, -0.077827044, -0.07003309, -0.10355045, -0.015734615, 0.036167942, 0.014831337, 0.08723817, 0.06974933, -0.03320681, -0.052084994, 0.026793856, 0.03224416, -0.03083215, -0.02936121, 0.017970955, 1.0009931E-32, -0.07540586, -0.040953893, -0.014978802, -0.020712268, -0.037676707, 0.060899913, -0.059535433, 0.090935245, -0.104427844, -0.034186255, -0.0027364914, 0.07125329, -0.076445825, 0.068130285, 0.04618232, -0.024334012, -0.02033701, -0.017687911, -0.061998025, -0.100348726, -0.009334153, 0.00049969106, 0.041866463, -0.037538208, 0.018114509, -0.021495841, 0.046746958, 0.0058532367, 0.011296849, 0.028661648, 0.0049967812, 0.021293236, -0.028552104, -0.028456422, -0.0599026, 0.025005618, -0.06596054, 0.008754479, -0.025867775, -0.022687117, 0.036053643, 0.003876931, -0.09278034, -0.033026353, -0.06273457, 0.10174492, 0.051962607, 0.039191462, -0.06228432, 0.0075851, -0.07110691, 0.013700966, -0.07137765, 0.021950072, -0.060872383, -0.027393285, -0.01005079, 0.032320708, 0.020342885, -0.04308101, -0.064905725, 0.085513756, 0.091484904, -0.09578084, -0.06072169, 0.051307295, 0.030827517, -0.059725273, -0.022251507, 0.056907013, -0.0143353185, 0.01682231, 0.03942171, 0.009771786, 0.024684055, 0.013501147, 0.011102638, 0.023086295, 0.047416065, -0.043554965, -0.013466956, -0.03939756, 0.03550251, 0.043990944, 0.081443265, -0.03936887, -0.03056774, -0.07734723, 0.018705979, -0.018674122, -0.05213852, 0.016079416, 0.0013432957, -0.043803815, -0.001535883, -1.1827393E-32, -0.0137260575, -0.024646465, 0.04492569, 0.023909671, 0.05241802, 0.0069492725, -0.02206733, -0.018109014, 0.04849452, 0.05216465, 0.004725988, 0.00040248936, 0.03372113, -0.03148689, 0.04448314, -0.0025778133, 0.013968759, -0.098832354, -0.033945054, -0.020057872, -0.0649255, 0.086504065, -0.06488163, 0.07598035, -0.031229896, -0.0011856352, 0.010302832, 0.016780293, -0.009518523, -0.05610782, -0.017297525, -0.076310195, -0.057853706, -0.012664431, -0.002802563, -0.033769906, -0.035152115, 0.09827526, -0.06848872, 0.17126998, -0.04850045, -0.08119668, 0.017509278, 0.07308132, -0.021054242, -0.073929265, 0.013704115, -0.026047455, 0.08734383, 0.047516704, 0.093356006, 0.07207601, -0.010212885, 0.042521104, -0.060549162, -0.008627061, 0.07652894, 0.004086818, 0.092982866, 0.034664012, 0.047986235, -0.030372808, -0.0019277794, -0.0055725854, -0.00093854935, -0.13218142, -0.004799824, -0.04036068, -0.01332664, -0.07887271, 0.004424336, -0.080561385, 0.002183817, -0.09268895, 0.038077876, -0.04770838, 0.019462451, 0.028333906, 0.1291994, 0.014144356, 0.019803585, 0.038429186, 0.09299551, 0.02284771, 0.00656607, 0.011994076, -0.07548806, 0.09850148, 0.0449726, 0.033237677, 0.04517508, 0.047070067, -0.05084374, 0.021842953, -0.102643825, -5.824915E-08, -0.021839086, -0.053250376, 0.031349853, 0.163075, 0.04408829, -0.046234075, 0.0065528154, 0.069606155, -0.07149129, -0.0030314971, 0.07431382, 0.013792589, -0.078140244, -0.002127636, -0.024354203, -0.009051566, 0.0080710845, 0.080780946, -0.02299891, 0.035973135, 0.025038972, 0.024075845, -0.03360756, 0.061703, 0.03919475, 0.005631174, -0.033111427, -0.0045225536, 0.06183132, 0.042251095, -0.02836628, 0.044246025, 0.016215265, -0.038777515, -0.003405004, -0.017433418, -0.042164356, 0.044445906, -0.06036227, 0.008551477, 0.12789138, -0.09689581, -0.04573304, 0.026402708, -0.0010394843, 0.004396332, 0.034547906, -0.1115681, -0.007983516, -0.01462107, -0.033586442, -0.074389204, 0.01087478, 0.064027674, 0.018943515, -0.06397476, -0.023299744, 0.03590389, -0.0037537157, -0.019096684, 0.1375304, -0.010479749, -0.08855874, 0.09941913
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.012381615, 0.02424476, -0.0042998665, 0.017042615, -0.0020894902, 0.07200975, 0.032271013, 0.07182269, -0.029239664, -0.036759317, -0.0018864581, -0.030657442, 0.021270648, 0.015404886, -0.0073412834, 0.0011804478, 0.018512618, -0.064599335, -0.043422125, 0.025321726, -0.030731173, -0.029803235, 0.005581431, -0.04871974, 0.0052061602, 0.0117026465, 0.04940428, 0.060820233, -0.065682486, -0.02674824, -0.008715481, 0.07471297, 0.005191677, -0.0027422032, -0.052547254, -0.20102224, -0.11696577, -0.004887981, -0.037225667, -0.03110717, -0.08579266, -0.071486115, -0.034202587, -0.03203518, -0.005058898, 0.015113555, 0.0061738575, 0.014395009, 0.09538121, 0.012448954, -0.032376945, -0.007698532, -0.03929896, -0.047328684, -0.004116015, -0.033269636, -0.0902357, 0.026720284, 0.0058673667, -0.03249893, 0.005629566, -0.033243187, -0.013395157, -0.0066261142, -0.012742623, -0.028868973, -0.011604789, -0.024817469, -0.06090461, 0.081365764, 0.018251315, 0.065133944, 0.029672742, -0.029624237, 0.007373278, -0.02779398, 0.07881554, -0.09364444, 0.011788737, -0.03306978, -0.06757514, -0.0075481716, -0.12835668, 0.01794214, 0.035493094, -0.025118379, 0.00937359, -0.064839, -0.032598037, 0.024818135, -0.078998335, -0.017180938, 0.062151734, -0.046501715, -0.08927812, 0.04950667, 0.061504167, 0.027341727, -0.0018225816, 0.052160572, 0.047882814, 0.013943688, 0.0045999037, 0.027996795, -0.013813083, -0.0019935952, -0.0068425853, 0.11311111, -0.0026992832, -0.016493924, -0.04418112, -0.00057715696, -0.077827044, -0.07003309, -0.10355045, -0.015734615, 0.036167942, 0.014831337, 0.08723817, 0.06974933, -0.03320681, -0.052084994, 0.026793856, 0.03224416, -0.03083215, -0.02936121, 0.017970955, 1.0009931E-32, -0.07540586, -0.040953893, -0.014978802, -0.020712268, -0.037676707, 0.060899913, -0.059535433, 0.090935245, -0.104427844, -0.034186255, -0.0027364914, 0.07125329, -0.076445825, 0.068130285, 0.04618232, -0.024334012, -0.02033701, -0.017687911, -0.061998025, -0.100348726, -0.009334153, 0.00049969106, 0.041866463, -0.037538208, 0.018114509, -0.021495841, 0.046746958, 0.0058532367, 0.011296849, 0.028661648, 0.0049967812, 0.021293236, -0.028552104, -0.028456422, -0.0599026, 0.025005618, -0.06596054, 0.008754479, -0.025867775, -0.022687117, 0.036053643, 0.003876931, -0.09278034, -0.033026353, -0.06273457, 0.10174492, 0.051962607, 0.039191462, -0.06228432, 0.0075851, -0.07110691, 0.013700966, -0.07137765, 0.021950072, -0.060872383, -0.027393285, -0.01005079, 0.032320708, 0.020342885, -0.04308101, -0.064905725, 0.085513756, 0.091484904, -0.09578084, -0.06072169, 0.051307295, 0.030827517, -0.059725273, -0.022251507, 0.056907013, -0.0143353185, 0.01682231, 0.03942171, 0.009771786, 0.024684055, 0.013501147, 0.011102638, 0.023086295, 0.047416065, -0.043554965, -0.013466956, -0.03939756, 0.03550251, 0.043990944, 0.081443265, -0.03936887, -0.03056774, -0.07734723, 0.018705979, -0.018674122, -0.05213852, 0.016079416, 0.0013432957, -0.043803815, -0.001535883, -1.1827393E-32, -0.0137260575, -0.024646465, 0.04492569, 0.023909671, 0.05241802, 0.0069492725, -0.02206733, -0.018109014, 0.04849452, 0.05216465, 0.004725988, 0.00040248936, 0.03372113, -0.03148689, 0.04448314, -0.0025778133, 0.013968759, -0.098832354, -0.033945054, -0.020057872, -0.0649255, 0.086504065, -0.06488163, 0.07598035, -0.031229896, -0.0011856352, 0.010302832, 0.016780293, -0.009518523, -0.05610782, -0.017297525, -0.076310195, -0.057853706, -0.012664431, -0.002802563, -0.033769906, -0.035152115, 0.09827526, -0.06848872, 0.17126998, -0.04850045, -0.08119668, 0.017509278, 0.07308132, -0.021054242, -0.073929265, 0.013704115, -0.026047455, 0.08734383, 0.047516704, 0.093356006, 0.07207601, -0.010212885, 0.042521104, -0.060549162, -0.008627061, 0.07652894, 0.004086818, 0.092982866, 0.034664012, 0.047986235, -0.030372808, -0.0019277794, -0.0055725854, -0.00093854935, -0.13218142, -0.004799824, -0.04036068, -0.01332664, -0.07887271, 0.004424336, -0.080561385, 0.002183817, -0.09268895, 0.038077876, -0.04770838, 0.019462451, 0.028333906, 0.1291994, 0.014144356, 0.019803585, 0.038429186, 0.09299551, 0.02284771, 0.00656607, 0.011994076, -0.07548806, 0.09850148, 0.0449726, 0.033237677, 0.04517508, 0.047070067, -0.05084374, 0.021842953, -0.102643825, -5.824915E-08, -0.021839086, -0.053250376, 0.031349853, 0.163075, 0.04408829, -0.046234075, 0.0065528154, 0.069606155, -0.07149129, -0.0030314971, 0.07431382, 0.013792589, -0.078140244, -0.002127636, -0.024354203, -0.009051566, 0.0080710845, 0.080780946, -0.02299891, 0.035973135, 0.025038972, 0.024075845, -0.03360756, 0.061703, 0.03919475, 0.005631174, -0.033111427, -0.0045225536, 0.06183132, 0.042251095, -0.02836628, 0.044246025, 0.016215265, -0.038777515, -0.003405004, -0.017433418, -0.042164356, 0.044445906, -0.06036227, 0.008551477, 0.12789138, -0.09689581, -0.04573304, 0.026402708, -0.0010394843, 0.004396332, 0.034547906, -0.1115681, -0.007983516, -0.01462107, -0.033586442, -0.074389204, 0.01087478, 0.064027674, 0.018943515, -0.06397476, -0.023299744, 0.03590389, -0.0037537157, -0.019096684, 0.1375304, -0.010479749, -0.08855874, 0.09941913
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 9, 199, 64, 40, 124
Top 5 recommended vehicle IDs: 9, 199, 64, 40, 124
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Final recommendation list contains 5 vehicles.
Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "u"."Id", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "u"."UserId" = @__userId_0
ORDER BY "u"."Id", "v"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "u"."Id", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "u"."UserId" = @__userId_0
ORDER BY "u"."Id", "v"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
User with ID 2 not found, returning empty recommendations.
User with ID 2 not found, returning empty recommendations.
Text prompt received: show me electric vehicles
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
User with ID 2 not found, returning empty recommendations.
Text prompt received: show me electric vehicles
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
User with ID 2 not found, returning empty recommendations.
Application is shutting down...
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 13), @__username_1='?' (Size = 4)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__email_0 OR "u"."Username" = @__username_1)
Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 13), @p2='?' (Size = 4), @p3='?' (Size = 4), @p4='?' (Size = 60), @p5='?' (Size = 10), @p6='?' (Size = 4)], CommandType='Text', CommandTimeout='30']
INSERT INTO "Users" ("DateRegistered", "Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber", "Username")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 13)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Generating user embedding for user ID 2
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated user embedding: -0.0151215205, 0.05415558, -0.014090992, 0.031240605, -0.03219848, 0.05674077, 0.058375094, 0.08479542, -0.0813345, -0.03865797, 0.024748096, -0.005852168, 0.014042637, -0.017206062, 0.013448542, 0.00055342936, 0.056007795, -0.05433465, -0.01427229, 0.040034533, -0.040514972, -0.041613583, 0.025521172, -0.03979383, -0.042337857, -0.027287442, 0.0059746373, 0.07630345, -0.039914936, 0.036159094, 0.015991148, 0.062962726, 0.058987696, -0.01843352, -0.028778296, -0.17446539, -0.09555049, -0.048724152, -0.06743391, -0.03988265, -0.08523936, -0.08021153, -0.01037589, 0.01844435, -0.031355344, 0.028879255, 0.0312179, 0.029968662, 0.094727196, -0.064346075, 0.0060473983, -0.012036468, -0.01869972, -0.09681069, -0.04134666, 0.061993368, -0.0906107, 0.07114825, 0.0018366962, -0.028406506, 0.018983202, -0.06629686, -0.021502037, 0.03492554, 0.0002543975, 0.015660184, -0.023186639, -0.05327827, 0.01741857, 0.021857643, 0.046587676, 0.024771878, 0.016880307, -0.0029276784, 0.022557864, -0.0582989, 0.04716317, -0.058611676, -0.013850582, -0.0444701, -0.046700194, 0.013188881, -0.058196343, 0.0076264283, 0.017094128, 0.0392666, -0.00381157, -0.028901735, 0.033496886, 0.034387764, -0.057540487, -0.011453673, 0.01244495, -0.07648827, -0.096812576, 0.07161613, 0.035852976, -0.010332085, -0.051878195, 0.041275553, 0.060839117, -0.017720297, 0.04082835, 0.056769293, -0.031115921, 0.05367658, -0.026665285, 0.07493081, -0.0077892616, 0.00734516, -0.027269524, -0.038125798, -0.003469864, -0.036823597, -0.08969223, -0.00045941284, -0.015868902, 0.024248688, 0.083313696, 0.07161052, -0.04838572, -0.13450238, -0.0036697255, -0.011285348, -0.032920994, -0.017041568, -0.019278778, -3.795559E-33, -0.042414222, 0.0059504975, 0.026341544, -0.007459904, -0.005104851, 0.06536805, -0.0042542173, 0.052767728, -0.08704855, -0.014607491, 0.028069729, 0.055147342, -0.075254515, 0.10045064, 0.074929334, 0.0121751595, -0.0063078986, 0.0114700645, -0.06963004, -0.10686511, -0.019082213, 0.02019999, 0.03826613, -0.0080824, 0.092988186, -0.0070200297, 0.022143355, -0.013488803, 0.04557095, 0.039611507, -0.051166788, 0.04333815, -0.0014840467, -0.011650723, -0.034842398, 0.05495385, -0.12360107, 0.019977683, -0.0490505, -0.012510606, 0.038960595, -0.0044021513, -0.071725026, -0.0024800191, -0.029361503, 0.035928994, 0.086357445, 0.018808154, -0.008684362, 0.021590559, -0.027021302, 0.03206974, -0.020688282, 0.02047355, 0.0009344737, -0.00675156, -0.0004853656, 0.056999654, -0.013927422, -0.054835774, -0.0107663525, 0.03754783, 0.07215282, -0.076222755, -0.052019075, 0.0430966, -0.029356344, -0.07173543, 0.015972888, 0.06694384, -0.023479111, 0.014571859, 0.0143746985, 0.0243298, -0.015444835, 0.03680647, 0.004421208, 0.04648205, 0.012184845, -0.06412037, -0.0069917464, 0.00018661087, -0.00027132197, 0.047439102, 0.07935311, -0.042839535, -0.04182831, -0.06925497, 0.013705756, 0.041469995, 0.009345551, 0.04519159, -0.04232286, 0.04011561, -0.007723929, 1.0100324E-33, 0.019051991, -0.09284443, 0.042827975, 0.00782901, 0.025909789, 0.0057924115, 0.0011915057, -0.06905928, 0.053221576, 0.051129512, -0.020336235, 0.027507482, 0.07111758, -0.024485594, 0.055012476, 0.017581373, 0.04393904, -0.09498625, -0.059119124, -0.0068815285, -0.06444502, 0.017085783, -0.020904422, 0.034077495, -0.04081298, -0.02583179, -0.014143355, -0.04042215, -0.03938347, -0.06526988, -0.04908639, -0.019675603, -0.06256869, -0.022699034, -0.009380275, -0.021704655, -0.059442796, 0.086074956, -0.08808559, 0.18919331, -0.038123325, -0.038109224, 0.05484283, 0.09270046, -0.026105747, -0.03185297, 0.04085924, -0.030401412, 0.095542245, 0.012474321, 0.087559775, -0.016698508, 0.058619365, 0.062021542, -0.040352184, -0.014517608, 0.045840334, 0.010913445, 0.097389534, 0.054608393, 0.070438586, -0.019991854, -0.034085188, -0.0025112403, -0.038034603, -0.10721436, -0.037053302, -0.005448512, -0.043275684, -0.04442712, -0.009099973, -0.11653078, 0.019734189, -0.042704873, 0.008550183, -0.016385805, 0.050267294, -0.016120125, 0.06355785, 0.013311329, 0.011597448, 0.024297358, 0.07810989, 0.101333365, 5.6006556E-05, 0.04456227, -0.10356273, 0.07289138, 0.07763413, 0.037417702, 0.052103613, 0.08312954, -0.04438231, 0.024206664, -0.11876867, -1.8140382E-08, -0.011055425, -0.056633625, 0.06819392, 0.058417685, 0.021032972, 0.024054501, 0.0035450677, 0.011494665, -0.10137224, 0.012952037, 0.026111359, 0.02788272, -0.027850991, 0.037471224, 0.0056815282, -0.039843738, 0.004600611, 0.08463644, -0.056375723, 0.06361108, -0.013437358, 0.012096341, -0.0078848675, 0.07017975, 0.04689699, -0.027622156, -0.062035173, 0.020631073, 0.025085108, 0.035775032, 0.00033721622, 0.05330362, 0.0947102, -0.036560558, 0.019335408, -0.0053837313, -0.07319461, 0.06196389, -0.06962731, -0.08303081, 0.1645347, -0.07433755, -0.049709678, 0.01995267, -0.05601784, 0.024894409, 0.10202317, -0.10023628, -0.045633104, -0.0015949493, -0.0641413, -0.06900503, -0.023319, 0.09077383, 0.046534337, -0.0929669, -0.017552834, 0.0040558204, 0.021916127, -0.042823546, 0.0545303, 0.0594544, -0.08390709, 0.087282896
Generated user embedding: -0.0151215205, 0.05415558, -0.014090992, 0.031240605, -0.03219848, 0.05674077, 0.058375094, 0.08479542, -0.0813345, -0.03865797, 0.024748096, -0.005852168, 0.014042637, -0.017206062, 0.013448542, 0.00055342936, 0.056007795, -0.05433465, -0.01427229, 0.040034533, -0.040514972, -0.041613583, 0.025521172, -0.03979383, -0.042337857, -0.027287442, 0.0059746373, 0.07630345, -0.039914936, 0.036159094, 0.015991148, 0.062962726, 0.058987696, -0.01843352, -0.028778296, -0.17446539, -0.09555049, -0.048724152, -0.06743391, -0.03988265, -0.08523936, -0.08021153, -0.01037589, 0.01844435, -0.031355344, 0.028879255, 0.0312179, 0.029968662, 0.094727196, -0.064346075, 0.0060473983, -0.012036468, -0.01869972, -0.09681069, -0.04134666, 0.061993368, -0.0906107, 0.07114825, 0.0018366962, -0.028406506, 0.018983202, -0.06629686, -0.021502037, 0.03492554, 0.0002543975, 0.015660184, -0.023186639, -0.05327827, 0.01741857, 0.021857643, 0.046587676, 0.024771878, 0.016880307, -0.0029276784, 0.022557864, -0.0582989, 0.04716317, -0.058611676, -0.013850582, -0.0444701, -0.046700194, 0.013188881, -0.058196343, 0.0076264283, 0.017094128, 0.0392666, -0.00381157, -0.028901735, 0.033496886, 0.034387764, -0.057540487, -0.011453673, 0.01244495, -0.07648827, -0.096812576, 0.07161613, 0.035852976, -0.010332085, -0.051878195, 0.041275553, 0.060839117, -0.017720297, 0.04082835, 0.056769293, -0.031115921, 0.05367658, -0.026665285, 0.07493081, -0.0077892616, 0.00734516, -0.027269524, -0.038125798, -0.003469864, -0.036823597, -0.08969223, -0.00045941284, -0.015868902, 0.024248688, 0.083313696, 0.07161052, -0.04838572, -0.13450238, -0.0036697255, -0.011285348, -0.032920994, -0.017041568, -0.019278778, -3.795559E-33, -0.042414222, 0.0059504975, 0.026341544, -0.007459904, -0.005104851, 0.06536805, -0.0042542173, 0.052767728, -0.08704855, -0.014607491, 0.028069729, 0.055147342, -0.075254515, 0.10045064, 0.074929334, 0.0121751595, -0.0063078986, 0.0114700645, -0.06963004, -0.10686511, -0.019082213, 0.02019999, 0.03826613, -0.0080824, 0.092988186, -0.0070200297, 0.022143355, -0.013488803, 0.04557095, 0.039611507, -0.051166788, 0.04333815, -0.0014840467, -0.011650723, -0.034842398, 0.05495385, -0.12360107, 0.019977683, -0.0490505, -0.012510606, 0.038960595, -0.0044021513, -0.071725026, -0.0024800191, -0.029361503, 0.035928994, 0.086357445, 0.018808154, -0.008684362, 0.021590559, -0.027021302, 0.03206974, -0.020688282, 0.02047355, 0.0009344737, -0.00675156, -0.0004853656, 0.056999654, -0.013927422, -0.054835774, -0.0107663525, 0.03754783, 0.07215282, -0.076222755, -0.052019075, 0.0430966, -0.029356344, -0.07173543, 0.015972888, 0.06694384, -0.023479111, 0.014571859, 0.0143746985, 0.0243298, -0.015444835, 0.03680647, 0.004421208, 0.04648205, 0.012184845, -0.06412037, -0.0069917464, 0.00018661087, -0.00027132197, 0.047439102, 0.07935311, -0.042839535, -0.04182831, -0.06925497, 0.013705756, 0.041469995, 0.009345551, 0.04519159, -0.04232286, 0.04011561, -0.007723929, 1.0100324E-33, 0.019051991, -0.09284443, 0.042827975, 0.00782901, 0.025909789, 0.0057924115, 0.0011915057, -0.06905928, 0.053221576, 0.051129512, -0.020336235, 0.027507482, 0.07111758, -0.024485594, 0.055012476, 0.017581373, 0.04393904, -0.09498625, -0.059119124, -0.0068815285, -0.06444502, 0.017085783, -0.020904422, 0.034077495, -0.04081298, -0.02583179, -0.014143355, -0.04042215, -0.03938347, -0.06526988, -0.04908639, -0.019675603, -0.06256869, -0.022699034, -0.009380275, -0.021704655, -0.059442796, 0.086074956, -0.08808559, 0.18919331, -0.038123325, -0.038109224, 0.05484283, 0.09270046, -0.026105747, -0.03185297, 0.04085924, -0.030401412, 0.095542245, 0.012474321, 0.087559775, -0.016698508, 0.058619365, 0.062021542, -0.040352184, -0.014517608, 0.045840334, 0.010913445, 0.097389534, 0.054608393, 0.070438586, -0.019991854, -0.034085188, -0.0025112403, -0.038034603, -0.10721436, -0.037053302, -0.005448512, -0.043275684, -0.04442712, -0.009099973, -0.11653078, 0.019734189, -0.042704873, 0.008550183, -0.016385805, 0.050267294, -0.016120125, 0.06355785, 0.013311329, 0.011597448, 0.024297358, 0.07810989, 0.101333365, 5.6006556E-05, 0.04456227, -0.10356273, 0.07289138, 0.07763413, 0.037417702, 0.052103613, 0.08312954, -0.04438231, 0.024206664, -0.11876867, -1.8140382E-08, -0.011055425, -0.056633625, 0.06819392, 0.058417685, 0.021032972, 0.024054501, 0.0035450677, 0.011494665, -0.10137224, 0.012952037, 0.026111359, 0.02788272, -0.027850991, 0.037471224, 0.0056815282, -0.039843738, 0.004600611, 0.08463644, -0.056375723, 0.06361108, -0.013437358, 0.012096341, -0.0078848675, 0.07017975, 0.04689699, -0.027622156, -0.062035173, 0.020631073, 0.025085108, 0.035775032, 0.00033721622, 0.05330362, 0.0947102, -0.036560558, 0.019335408, -0.0053837313, -0.07319461, 0.06196389, -0.06962731, -0.08303081, 0.1645347, -0.07433755, -0.049709678, 0.01995267, -0.05601784, 0.024894409, 0.10202317, -0.10023628, -0.045633104, -0.0015949493, -0.0641413, -0.06900503, -0.023319, 0.09077383, 0.046534337, -0.0929669, -0.017552834, 0.0040558204, 0.021916127, -0.042823546, 0.0545303, 0.0594544, -0.08390709, 0.087282896
Generating vehicle embeddings...
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/parameters
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 170, 171, 61, 107, 113
Top 5 recommended vehicle IDs: 170, 171, 61, 107, 113
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Final recommendation list contains 5 vehicles.
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 58), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 21)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: -0.033492517, 0.053953297, 0.024584271, -0.009872301, 0.028911775, 0.020857055, 0.060166243, 0.100928314, -0.06767997, -0.022966849, -0.016809482, -0.050256528, 0.0010324011, 0.048818965, 0.0755671, 0.02414434, 0.09285508, -0.04280214, -0.0811689, 0.009459555, 0.074209735, -0.012570457, 0.046895165, -0.056512527, -0.07152501, -0.058466915, -0.028625797, 0.036999967, -0.028013756, -0.01090963, -0.018013887, 0.028401138, 0.08038671, 0.011498952, -0.042956103, -0.110030405, -0.07437876, -0.08839762, -0.020339834, -0.06680104, -0.07771082, -0.042340554, -0.03991079, -0.005414109, -0.025645094, 0.030605925, 0.027789893, 0.010367375, 0.018671343, -0.054590862, -0.059654493, -0.042315453, -0.029849792, 0.0038349994, 0.028697086, 0.005684569, -0.03327554, -0.0015089046, 0.012257728, -0.03230249, -0.0299755, -0.06616693, -0.022533404, 0.015005155, 0.034192126, -0.03900499, 0.017554803, -0.025699804, -0.0065632644, 0.05732052, 0.0675155, 0.029573187, -0.04953666, -0.07720939, 0.009105899, -0.028730597, -0.02072429, -0.015558742, -0.054061703, -0.046399716, -0.05188313, -0.052494064, -0.07627111, -0.012129107, 0.048590988, 0.008954868, -0.02305458, -0.06713437, -0.04476098, 0.005105007, 0.0062301853, -0.019267548, 0.052103043, 0.019623151, -0.050754797, 0.072135456, 0.06363111, -0.048336472, -0.07874091, -0.00070660113, 0.01969935, -0.027617734, -0.030896863, -0.007827227, -0.016907832, 0.032700505, -0.01820453, 0.07643122, 0.025767278, 0.026993744, -0.03324804, -0.006106265, -0.057157125, -0.07553725, -0.10617078, 0.0071078837, 0.099173374, -0.0033676098, 0.09563158, 0.00044076238, -0.05468266, -0.051842988, -0.0056319577, -0.025562027, 0.015399588, 0.0061581135, -0.0053328346, 2.1628824E-33, -0.011025336, 0.017115816, 0.014146321, -0.004651892, -0.04752247, 0.014469981, 0.004442548, 0.08158016, -0.057092585, -0.04427295, 0.017187245, 0.10672243, 0.03050104, 0.04287827, -0.008512488, -0.0405086, 0.017453507, -0.0063566687, 0.007449744, -0.05099757, 0.03073359, 0.033521414, 0.03415331, -0.03728483, 0.08816185, -0.031202454, 0.02258922, -0.077917464, 0.0062405937, 0.028591936, 0.0013092393, -0.035262104, -0.026128843, 0.022463424, -0.007371552, 0.08701335, -0.061620943, 0.018160285, -0.02867464, -0.04932072, 0.030312594, -0.009060626, -0.08918869, 0.03249239, 0.019722741, -0.020499792, -0.008820032, 0.010195304, 0.05788389, 0.053778727, -0.03697813, 0.010994319, -0.008691682, -0.015873237, 0.025716925, 0.018722078, 0.0048460565, 0.058720086, -0.014334397, -0.012028395, -0.033625055, 0.005298015, 0.045024376, -0.013375312, -0.044549983, -0.02164378, 0.013450677, -0.030806571, 0.042499352, 0.016312234, -0.01277746, -0.024338402, -0.015762476, 0.008694601, 0.03449605, 0.04739437, -0.039277393, 0.043986958, 0.039916735, -0.060091328, -0.015937228, -0.010013922, -0.02561859, 0.04443613, 0.08309874, -0.03499204, 0.009879529, -0.05805062, -0.013954559, 0.002223385, -0.010029719, 0.08228534, -0.0075983643, 0.046232168, 0.0003151214, -2.6917989E-33, 0.024052957, -0.07142045, 0.028194549, 0.06664209, 0.08380425, -0.026059918, 0.0075760246, -0.15768443, 0.09182691, 0.092093304, -0.020113725, -0.023800984, 0.049502295, -0.08321166, 0.016943907, 0.042056765, -0.042103313, -0.06730597, -0.020757757, 0.03659389, -0.07246115, 0.07840001, -0.10381091, 0.049235154, -0.045595042, 0.005586961, -0.05613929, -0.010848177, 0.047221266, -0.0686913, -0.054789193, -0.052355822, -0.08875512, 0.011593539, -0.06324495, -0.011092671, -0.0034269912, 0.088470705, -0.068799786, 0.18458118, 0.0022440422, 0.0012831875, -0.026993228, 0.086665824, -0.03151587, -0.03305933, -0.019297855, -0.01829582, 0.009710434, 0.05394976, 0.04392016, 0.009192659, 0.023904815, 0.045639325, -0.007569093, -0.017870318, 0.037615784, 0.040623594, 0.07886539, 0.050971493, 0.076962724, 0.056901503, -0.0051023383, 0.019701395, 0.01703101, -0.11860192, 0.057294905, -0.067834504, -0.022744432, -0.118445225, -0.015767237, -0.07121078, -0.0022803748, -0.0028209456, 0.0019006967, 0.0039431322, 0.09725106, -0.0006923344, 0.036684893, -0.04758185, 0.05269059, 0.09914514, -0.025124233, 0.07153989, -0.027454808, 0.045060944, -0.022711586, 0.031281985, 0.049165342, -0.010386392, 0.02636589, 0.012595731, -0.027729565, 0.02324088, -0.096592925, -2.943325E-08, 0.029871382, 0.015608893, 0.04622576, 0.06619698, 0.1108217, 0.020343846, -0.015928164, 0.07850491, -0.05072349, -0.03696554, 0.052062172, 0.053372014, -0.038875207, 0.013227733, 0.013256769, -0.059373066, 0.0060545662, -0.00790874, -0.06570474, -0.005308357, -0.0478439, 0.058013167, -0.030757163, 0.04292302, 0.07608288, 0.021112198, 0.026064869, 0.030951722, -0.004698777, 0.052122537, -0.028343933, 0.03384146, 0.057091054, -0.0044872155, 0.012879066, -0.005738849, -0.10803815, 0.010009183, -0.10587281, -0.08852832, 0.12922028, -0.01613818, -0.021278756, 0.020577908, -0.022538269, 0.009761694, 0.003178639, -0.13131946, -0.0019491432, 0.01537032, -0.103974715, -0.13053486, 0.019034503, 0.092074186, -0.050085872, 0.084675625, -0.029515773, -0.009428699, 0.049664225, -0.104684114, 0.20792826, 0.078628175, -0.067233436, 0.11639585
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 42, 124, 199, 75, 138
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 19)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: -0.0151215205, 0.05415558, -0.014090992, 0.031240605, -0.03219848, 0.05674077, 0.058375094, 0.08479542, -0.0813345, -0.03865797, 0.024748096, -0.005852168, 0.014042637, -0.017206062, 0.013448542, 0.00055342936, 0.056007795, -0.05433465, -0.01427229, 0.040034533, -0.040514972, -0.041613583, 0.025521172, -0.03979383, -0.042337857, -0.027287442, 0.0059746373, 0.07630345, -0.039914936, 0.036159094, 0.015991148, 0.062962726, 0.058987696, -0.01843352, -0.028778296, -0.17446539, -0.09555049, -0.048724152, -0.06743391, -0.03988265, -0.08523936, -0.08021153, -0.01037589, 0.01844435, -0.031355344, 0.028879255, 0.0312179, 0.029968662, 0.094727196, -0.064346075, 0.0060473983, -0.012036468, -0.01869972, -0.09681069, -0.04134666, 0.061993368, -0.0906107, 0.07114825, 0.0018366962, -0.028406506, 0.018983202, -0.06629686, -0.021502037, 0.03492554, 0.0002543975, 0.015660184, -0.023186639, -0.05327827, 0.01741857, 0.021857643, 0.046587676, 0.024771878, 0.016880307, -0.0029276784, 0.022557864, -0.0582989, 0.04716317, -0.058611676, -0.013850582, -0.0444701, -0.046700194, 0.013188881, -0.058196343, 0.0076264283, 0.017094128, 0.0392666, -0.00381157, -0.028901735, 0.033496886, 0.034387764, -0.057540487, -0.011453673, 0.01244495, -0.07648827, -0.096812576, 0.07161613, 0.035852976, -0.010332085, -0.051878195, 0.041275553, 0.060839117, -0.017720297, 0.04082835, 0.056769293, -0.031115921, 0.05367658, -0.026665285, 0.07493081, -0.0077892616, 0.00734516, -0.027269524, -0.038125798, -0.003469864, -0.036823597, -0.08969223, -0.00045941284, -0.015868902, 0.024248688, 0.083313696, 0.07161052, -0.04838572, -0.13450238, -0.0036697255, -0.011285348, -0.032920994, -0.017041568, -0.019278778, -3.795559E-33, -0.042414222, 0.0059504975, 0.026341544, -0.007459904, -0.005104851, 0.06536805, -0.0042542173, 0.052767728, -0.08704855, -0.014607491, 0.028069729, 0.055147342, -0.075254515, 0.10045064, 0.074929334, 0.0121751595, -0.0063078986, 0.0114700645, -0.06963004, -0.10686511, -0.019082213, 0.02019999, 0.03826613, -0.0080824, 0.092988186, -0.0070200297, 0.022143355, -0.013488803, 0.04557095, 0.039611507, -0.051166788, 0.04333815, -0.0014840467, -0.011650723, -0.034842398, 0.05495385, -0.12360107, 0.019977683, -0.0490505, -0.012510606, 0.038960595, -0.0044021513, -0.071725026, -0.0024800191, -0.029361503, 0.035928994, 0.086357445, 0.018808154, -0.008684362, 0.021590559, -0.027021302, 0.03206974, -0.020688282, 0.02047355, 0.0009344737, -0.00675156, -0.0004853656, 0.056999654, -0.013927422, -0.054835774, -0.0107663525, 0.03754783, 0.07215282, -0.076222755, -0.052019075, 0.0430966, -0.029356344, -0.07173543, 0.015972888, 0.06694384, -0.023479111, 0.014571859, 0.0143746985, 0.0243298, -0.015444835, 0.03680647, 0.004421208, 0.04648205, 0.012184845, -0.06412037, -0.0069917464, 0.00018661087, -0.00027132197, 0.047439102, 0.07935311, -0.042839535, -0.04182831, -0.06925497, 0.013705756, 0.041469995, 0.009345551, 0.04519159, -0.04232286, 0.04011561, -0.007723929, 1.0100324E-33, 0.019051991, -0.09284443, 0.042827975, 0.00782901, 0.025909789, 0.0057924115, 0.0011915057, -0.06905928, 0.053221576, 0.051129512, -0.020336235, 0.027507482, 0.07111758, -0.024485594, 0.055012476, 0.017581373, 0.04393904, -0.09498625, -0.059119124, -0.0068815285, -0.06444502, 0.017085783, -0.020904422, 0.034077495, -0.04081298, -0.02583179, -0.014143355, -0.04042215, -0.03938347, -0.06526988, -0.04908639, -0.019675603, -0.06256869, -0.022699034, -0.009380275, -0.021704655, -0.059442796, 0.086074956, -0.08808559, 0.18919331, -0.038123325, -0.038109224, 0.05484283, 0.09270046, -0.026105747, -0.03185297, 0.04085924, -0.030401412, 0.095542245, 0.012474321, 0.087559775, -0.016698508, 0.058619365, 0.062021542, -0.040352184, -0.014517608, 0.045840334, 0.010913445, 0.097389534, 0.054608393, 0.070438586, -0.019991854, -0.034085188, -0.0025112403, -0.038034603, -0.10721436, -0.037053302, -0.005448512, -0.043275684, -0.04442712, -0.009099973, -0.11653078, 0.019734189, -0.042704873, 0.008550183, -0.016385805, 0.050267294, -0.016120125, 0.06355785, 0.013311329, 0.011597448, 0.024297358, 0.07810989, 0.101333365, 5.6006556E-05, 0.04456227, -0.10356273, 0.07289138, 0.07763413, 0.037417702, 0.052103613, 0.08312954, -0.04438231, 0.024206664, -0.11876867, -1.8140382E-08, -0.011055425, -0.056633625, 0.06819392, 0.058417685, 0.021032972, 0.024054501, 0.0035450677, 0.011494665, -0.10137224, 0.012952037, 0.026111359, 0.02788272, -0.027850991, 0.037471224, 0.0056815282, -0.039843738, 0.004600611, 0.08463644, -0.056375723, 0.06361108, -0.013437358, 0.012096341, -0.0078848675, 0.07017975, 0.04689699, -0.027622156, -0.062035173, 0.020631073, 0.025085108, 0.035775032, 0.00033721622, 0.05330362, 0.0947102, -0.036560558, 0.019335408, -0.0053837313, -0.07319461, 0.06196389, -0.06962731, -0.08303081, 0.1645347, -0.07433755, -0.049709678, 0.01995267, -0.05601784, 0.024894409, 0.10202317, -0.10023628, -0.045633104, -0.0015949493, -0.0641413, -0.06900503, -0.023319, 0.09077383, 0.046534337, -0.0929669, -0.017552834, 0.0040558204, 0.021916127, -0.042823546, 0.0545303, 0.0594544, -0.08390709, 0.087282896
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: -0.0151215205, 0.05415558, -0.014090992, 0.031240605, -0.03219848, 0.05674077, 0.058375094, 0.08479542, -0.0813345, -0.03865797, 0.024748096, -0.005852168, 0.014042637, -0.017206062, 0.013448542, 0.00055342936, 0.056007795, -0.05433465, -0.01427229, 0.040034533, -0.040514972, -0.041613583, 0.025521172, -0.03979383, -0.042337857, -0.027287442, 0.0059746373, 0.07630345, -0.039914936, 0.036159094, 0.015991148, 0.062962726, 0.058987696, -0.01843352, -0.028778296, -0.17446539, -0.09555049, -0.048724152, -0.06743391, -0.03988265, -0.08523936, -0.08021153, -0.01037589, 0.01844435, -0.031355344, 0.028879255, 0.0312179, 0.029968662, 0.094727196, -0.064346075, 0.0060473983, -0.012036468, -0.01869972, -0.09681069, -0.04134666, 0.061993368, -0.0906107, 0.07114825, 0.0018366962, -0.028406506, 0.018983202, -0.06629686, -0.021502037, 0.03492554, 0.0002543975, 0.015660184, -0.023186639, -0.05327827, 0.01741857, 0.021857643, 0.046587676, 0.024771878, 0.016880307, -0.0029276784, 0.022557864, -0.0582989, 0.04716317, -0.058611676, -0.013850582, -0.0444701, -0.046700194, 0.013188881, -0.058196343, 0.0076264283, 0.017094128, 0.0392666, -0.00381157, -0.028901735, 0.033496886, 0.034387764, -0.057540487, -0.011453673, 0.01244495, -0.07648827, -0.096812576, 0.07161613, 0.035852976, -0.010332085, -0.051878195, 0.041275553, 0.060839117, -0.017720297, 0.04082835, 0.056769293, -0.031115921, 0.05367658, -0.026665285, 0.07493081, -0.0077892616, 0.00734516, -0.027269524, -0.038125798, -0.003469864, -0.036823597, -0.08969223, -0.00045941284, -0.015868902, 0.024248688, 0.083313696, 0.07161052, -0.04838572, -0.13450238, -0.0036697255, -0.011285348, -0.032920994, -0.017041568, -0.019278778, -3.795559E-33, -0.042414222, 0.0059504975, 0.026341544, -0.007459904, -0.005104851, 0.06536805, -0.0042542173, 0.052767728, -0.08704855, -0.014607491, 0.028069729, 0.055147342, -0.075254515, 0.10045064, 0.074929334, 0.0121751595, -0.0063078986, 0.0114700645, -0.06963004, -0.10686511, -0.019082213, 0.02019999, 0.03826613, -0.0080824, 0.092988186, -0.0070200297, 0.022143355, -0.013488803, 0.04557095, 0.039611507, -0.051166788, 0.04333815, -0.0014840467, -0.011650723, -0.034842398, 0.05495385, -0.12360107, 0.019977683, -0.0490505, -0.012510606, 0.038960595, -0.0044021513, -0.071725026, -0.0024800191, -0.029361503, 0.035928994, 0.086357445, 0.018808154, -0.008684362, 0.021590559, -0.027021302, 0.03206974, -0.020688282, 0.02047355, 0.0009344737, -0.00675156, -0.0004853656, 0.056999654, -0.013927422, -0.054835774, -0.0107663525, 0.03754783, 0.07215282, -0.076222755, -0.052019075, 0.0430966, -0.029356344, -0.07173543, 0.015972888, 0.06694384, -0.023479111, 0.014571859, 0.0143746985, 0.0243298, -0.015444835, 0.03680647, 0.004421208, 0.04648205, 0.012184845, -0.06412037, -0.0069917464, 0.00018661087, -0.00027132197, 0.047439102, 0.07935311, -0.042839535, -0.04182831, -0.06925497, 0.013705756, 0.041469995, 0.009345551, 0.04519159, -0.04232286, 0.04011561, -0.007723929, 1.0100324E-33, 0.019051991, -0.09284443, 0.042827975, 0.00782901, 0.025909789, 0.0057924115, 0.0011915057, -0.06905928, 0.053221576, 0.051129512, -0.020336235, 0.027507482, 0.07111758, -0.024485594, 0.055012476, 0.017581373, 0.04393904, -0.09498625, -0.059119124, -0.0068815285, -0.06444502, 0.017085783, -0.020904422, 0.034077495, -0.04081298, -0.02583179, -0.014143355, -0.04042215, -0.03938347, -0.06526988, -0.04908639, -0.019675603, -0.06256869, -0.022699034, -0.009380275, -0.021704655, -0.059442796, 0.086074956, -0.08808559, 0.18919331, -0.038123325, -0.038109224, 0.05484283, 0.09270046, -0.026105747, -0.03185297, 0.04085924, -0.030401412, 0.095542245, 0.012474321, 0.087559775, -0.016698508, 0.058619365, 0.062021542, -0.040352184, -0.014517608, 0.045840334, 0.010913445, 0.097389534, 0.054608393, 0.070438586, -0.019991854, -0.034085188, -0.0025112403, -0.038034603, -0.10721436, -0.037053302, -0.005448512, -0.043275684, -0.04442712, -0.009099973, -0.11653078, 0.019734189, -0.042704873, 0.008550183, -0.016385805, 0.050267294, -0.016120125, 0.06355785, 0.013311329, 0.011597448, 0.024297358, 0.07810989, 0.101333365, 5.6006556E-05, 0.04456227, -0.10356273, 0.07289138, 0.07763413, 0.037417702, 0.052103613, 0.08312954, -0.04438231, 0.024206664, -0.11876867, -1.8140382E-08, -0.011055425, -0.056633625, 0.06819392, 0.058417685, 0.021032972, 0.024054501, 0.0035450677, 0.011494665, -0.10137224, 0.012952037, 0.026111359, 0.02788272, -0.027850991, 0.037471224, 0.0056815282, -0.039843738, 0.004600611, 0.08463644, -0.056375723, 0.06361108, -0.013437358, 0.012096341, -0.0078848675, 0.07017975, 0.04689699, -0.027622156, -0.062035173, 0.020631073, 0.025085108, 0.035775032, 0.00033721622, 0.05330362, 0.0947102, -0.036560558, 0.019335408, -0.0053837313, -0.07319461, 0.06196389, -0.06962731, -0.08303081, 0.1645347, -0.07433755, -0.049709678, 0.01995267, -0.05601784, 0.024894409, 0.10202317, -0.10023628, -0.045633104, -0.0015949493, -0.0641413, -0.06900503, -0.023319, 0.09077383, 0.046534337, -0.0929669, -0.017552834, 0.0040558204, 0.021916127, -0.042823546, 0.0545303, 0.0594544, -0.08390709, 0.087282896
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Application is shutting down...
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 170, 171, 61, 107, 113
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 170, 171, 61, 107, 113
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 13)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__vehicleId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserFavorites" AS "u"
    WHERE "u"."UserId" = @__userId_0 AND "u"."VehicleId" = @__vehicleId_1)
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__vehicleId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserFavorites" AS "u"
    WHERE "u"."UserId" = @__userId_0 AND "u"."VehicleId" = @__vehicleId_1)
Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."Id", "v0"."Id"
Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO "BrowsingHistory" ("UserId", "VehicleId", "ViewDate", "ViewDurationSeconds")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Executed DbCommand (152ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO "BrowsingHistory" ("UserId", "VehicleId", "ViewDate", "ViewDurationSeconds")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "Vehicles" AS "v"
WHERE "v"."Id" = @__p_0
LIMIT 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__vehicleId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId"
FROM "UserFavorites" AS "u"
WHERE "u"."UserId" = @__userId_0 AND "u"."VehicleId" = @__vehicleId_1
LIMIT 1
Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO "UserFavorites" ("DateAdded", "UserId", "VehicleId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Generating user embedding for user ID 2
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Final recommendation list contains 5 vehicles.
Application is shutting down...
Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Generating user embedding for user ID 2
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Final recommendation list contains 5 vehicles.
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Application is shutting down...
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Generating user embedding for user ID 2
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Final recommendation list contains 5 vehicles.
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 68), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 31)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: -0.016620861, 0.04479788, 0.04486048, -0.005321913, 0.059313316, 0.049184255, -0.0008830083, 0.05753948, -0.053413525, -0.03248219, -0.018640544, -0.06838303, -0.0023666413, 0.0066059246, 0.010452777, 0.002457725, 0.019407023, -0.03135179, -0.0053969827, 0.02470063, 0.033116538, 0.0028649627, 0.02855251, -0.044438772, -0.0058705877, -0.0010923924, 0.049331825, 0.04311971, -0.09241927, -0.064175986, -0.021517146, 0.04031401, 0.02513259, -0.011474049, -0.022756578, -0.17478669, -0.07384677, -0.0177333, -0.03019172, -0.059001952, -0.08536115, -0.068712994, -0.045671333, -0.021763869, 0.016857238, 0.014522826, 0.026412891, -0.039844994, 0.06979575, -0.04766773, -0.047067404, -0.01652301, -0.0306546, -0.048020273, -0.024971262, -0.050009653, -0.08210011, 0.014442293, 0.018970933, -0.040662166, 0.05544901, -0.033266034, -0.0056478297, -0.019731903, -0.042310752, -0.00529503, -0.014348386, 0.0049540102, -0.0034351558, 0.04955236, 0.05430811, 0.05051415, -0.013083003, -0.09167604, -0.018667681, -0.0017934799, 0.07329982, -0.031237047, -0.014519147, -0.06522484, -0.04796543, -0.06827903, -0.13335246, -0.029300544, 0.029317042, -0.024010016, -0.025198037, -0.060379293, -0.034671832, -0.00047972298, -0.017059287, 0.040007748, 0.05944066, -0.030500472, -0.06379092, 0.06894584, 0.014585525, -0.04751375, -0.035564836, 0.028715413, 0.04188616, 0.04367217, 0.022815427, 0.026918508, -0.077784374, -0.007752324, 0.0068734107, 0.07252239, 0.018571801, 0.0038593926, 0.0044446792, -0.031520788, -0.05172757, -0.04505223, -0.14223388, 0.018547902, 0.051638056, -0.013998671, 0.13905837, 0.07918607, -0.043117147, -0.06290031, -0.0007411759, 0.033413623, 0.043247752, -0.008751105, 0.021929637, 9.1615436E-33, -0.04793789, 0.012859608, 0.03361913, -0.025690852, -0.080715574, 0.04955301, -0.061974265, 0.03969704, -0.0762862, -0.033711806, 0.0041627144, 0.08280611, 0.002626327, 0.040897045, -0.011404671, -0.050995067, -0.010565734, -0.04302495, -0.005218963, -0.07241049, -0.015812878, 0.02979797, 0.021329386, 0.00039859526, 0.054335665, -0.005237085, 0.06068996, -0.082938164, 0.029046882, 0.03915856, -0.02555038, 0.0067895316, -0.032379106, 0.022668362, -0.054230228, 0.08549993, -0.09577809, -0.012482408, -0.04644246, -0.039839476, 0.044963807, -0.014406512, -0.090226606, 0.012516464, -0.015613057, 0.029945973, 0.009503033, 0.013927951, 0.005840245, 0.042067952, -0.10055474, -0.0039108703, -0.05263274, 0.030076897, -0.028534243, -0.0028122712, -0.035466343, 0.021931076, -0.008613995, -0.02354694, -0.04225587, 0.055914447, 0.049718775, -0.065737925, -0.07115038, 0.031470478, -0.0019014367, -0.03262516, -0.015190322, 0.044599693, 0.021843923, -0.040867176, 0.052487396, 0.0075099724, 0.031294707, 0.036083244, -0.030177936, 0.053217415, 0.02916481, -0.014407957, -0.027265964, -0.04582363, 0.008925124, 0.033216126, 0.12222855, -0.016409073, -0.018236611, -0.015594745, 0.019817786, 0.034021307, -0.017393958, 0.059235122, 0.004102176, 0.012656135, 0.00890666, -9.93917E-33, 0.010632739, -0.032606397, 0.03217832, 0.011270332, 0.060487557, 0.010406336, -0.02553412, -0.06091865, 0.061736587, 0.05070937, -0.029154392, -0.041994408, 0.064335205, -0.08018597, -0.017653072, 0.025055803, 0.013246909, -0.07754071, 0.0024077208, 0.046615306, -0.06660231, 0.09091272, -0.07971092, 0.071776405, -0.024860742, 0.028564317, -0.022715185, 0.039567627, -0.019012662, -0.06719084, -0.054158904, -0.08732427, -0.04586359, -0.013183312, -0.044226695, -0.03603242, 0.010866511, 0.10593841, -0.057827644, 0.173868, -0.037797593, -0.06349425, 0.01189479, 0.07060132, -0.02063567, -0.06499159, 0.011786596, -0.021743454, 0.048856437, 0.023316596, 0.06472716, 0.026047591, -0.03436843, 0.014445563, -0.041910358, -0.016206399, 0.06937294, 0.07945197, 0.008342336, 0.056452334, 0.06448558, 0.014037091, 0.032081485, -0.009893397, 0.017909463, -0.14728782, 0.076326415, -0.04416916, 0.021183185, -0.10976381, -0.00045509535, -0.03862118, -0.008676027, -0.009135984, -0.011048877, -0.002256719, 0.07054937, 0.008920559, 0.1176879, -0.039226376, 0.04261547, 0.079334125, 0.028855154, 0.027662346, 0.025290573, 0.01285249, -0.03238486, 0.038776875, 0.07132142, 0.015883937, 0.0143932905, 0.015295338, -0.04527967, 0.05437334, -0.11617393, -4.868214E-08, 0.087374136, -0.008175685, -0.004513714, 0.10347367, 0.08421251, -0.019095354, 0.028600754, 0.05842517, -0.08991582, -0.04450142, 0.11212698, -0.013238949, -0.030757856, 0.0021784962, 0.0147844935, -0.045234248, 0.030446151, 0.07280962, -0.042645756, 0.0058252593, -0.021599405, 0.045132477, -0.07215975, 0.05915478, 0.08345909, 0.023985406, 0.002136941, -0.016576527, 0.07163027, -0.01663467, -0.05662382, 0.0022920729, 0.033974867, -0.009835167, -0.009568657, -0.0022232414, -0.0454644, 0.049213797, -0.07860297, -0.037676368, 0.10022102, -0.06588137, -0.016378596, -0.00746979, -0.042772338, -0.026792113, -0.024971671, -0.14654851, 0.009477258, 0.062308207, -0.08470536, -0.116911076, 0.027066834, 0.10716315, -0.009265411, 0.017701553, -0.030708412, 0.040475484, -0.023836538, -0.029616343, 0.1796435, -0.019817602, -0.08815377, 0.1259811
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 5, 97, 129, 133
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 18)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Final recommendation list contains 5 vehicles.
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/parameters
Error extracting parameters from message
System.Text.Json.JsonException: The JSON value could not be converted to SmartAutoTrader.API.Models.FuelType. Path: $.preferredFuelTypes[0] | LineNumber: 0 | BytePositionInLine: 118.
   at System.Text.Json.ThrowHelper.ThrowJsonException(String message)
   at System.Text.Json.Serialization.Converters.EnumConverter`1.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 437
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 82), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 45)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: -0.041965846, 0.02431795, 0.022801135, 0.010635594, 0.028271923, 0.0471353, -0.020675145, 0.049125176, -0.038500343, -0.08284771, -0.025515776, -0.060631324, 0.04342517, 0.01598846, -0.028900575, -0.00040892017, 0.043125555, -0.033718925, -0.020910468, 0.018147564, 0.028088352, 0.009796839, 0.032340623, -0.009195693, 0.012761424, -0.006097687, 0.00038541952, 0.03884985, -0.05367214, -0.037463326, -0.03273356, 0.050166972, 0.05165646, 0.0034937323, -0.021291109, -0.15710306, -0.07703004, -0.007729544, -0.021151813, -0.060812436, -0.049051773, -0.046202246, -0.06460382, -0.023598325, 0.017048532, 0.022027403, 0.038777363, -0.018053614, 0.054029863, -0.015835416, -0.100462094, -0.009395604, -0.022561355, -0.038627602, -0.04232044, -0.048721977, -0.07576084, 0.011925395, -0.0011551193, -0.0039937147, 0.028053718, -0.06560366, -0.009977755, -0.01615794, -0.009427407, -0.041954193, -0.06010815, -0.011936543, -0.034752596, 0.03587645, 0.080344, 0.07003786, -0.035979, -0.05825579, -0.0062125036, 0.010651979, 0.043444857, -0.033704266, -0.041013133, -0.06373902, -0.017297886, -0.058620613, -0.1109552, -0.0152084, 0.0385038, -0.046205778, -0.022468507, -0.060866818, -0.0098633105, -0.010653613, -0.0317653, 0.006885778, 0.012142519, -0.014095288, -0.09785888, 0.061927877, 0.043721132, -0.004778192, -0.009153541, 0.033723615, 0.03853437, 0.0079084, -0.0005169389, 0.0016870387, -0.0427376, 0.009792748, -0.014110768, 0.109967634, 0.030289685, 0.024280386, 0.011925946, -0.011008687, -0.06953689, -0.06517872, -0.14308856, -0.0038764202, 0.07190573, -0.013488117, 0.13245763, 0.040831227, -0.015165869, -0.037138768, -0.000106639636, 0.021462645, 0.025152443, -0.03031104, -0.005093646, 8.082534E-33, -0.012593344, 0.012852753, 0.036233697, 0.0063095996, -0.06228736, 0.05296494, -0.06751789, 0.05508652, -0.055538163, -0.0380075, 0.0063881804, 0.05951902, -0.01066385, 0.050831378, -0.06491683, -0.015097775, -0.028147072, -0.06424957, -0.048241407, -0.067864485, -0.0038933153, 0.027802836, 0.01849338, 0.00804454, 0.070446625, -0.0016136589, 0.034032688, -0.07187752, 0.00996894, 0.021977339, -0.032445226, -0.006940756, -0.033865344, -0.00773614, -0.023118261, 0.08053871, -0.090125084, -0.017177686, -0.03934965, -0.025695056, 0.038109116, -0.017016418, -0.11161608, -0.021031002, -0.06253709, 0.033378113, 0.0022162076, 0.03893753, 0.0077480436, 0.027885472, -0.066606335, -0.0042169676, -0.06572484, 0.004550675, -0.017344108, 0.0030593027, -0.027446214, 0.015747678, -0.010768212, -0.011266106, -0.028079065, 0.06924197, 0.06933507, -0.016560752, -0.09989303, 0.032458402, 0.016051657, 0.006140011, 0.0333245, 0.0929772, 0.0026837057, -0.0014228163, 0.051119037, 0.0039599077, 0.039688468, 0.02705963, -0.05482995, 0.03582658, 0.057562876, -0.0149283465, 0.010851347, -0.039411712, 0.026828721, 0.043472413, 0.08704786, -0.0019455348, -0.021860614, -0.046114486, 0.002629719, 0.03937162, -0.0040666615, 0.06735267, 0.018794414, 0.0043911906, -0.022078332, -9.051136E-33, 0.017644115, -0.05885567, 0.07705272, -0.037691496, 0.06448439, -0.01318256, -0.02400452, -0.03527859, 0.08226298, 0.07435165, -0.011053919, -0.009200919, 0.051364906, -0.043259606, -0.016463162, 0.029953046, 0.05344836, -0.08815967, -0.05732651, -0.025404388, -0.087542795, 0.09423783, -0.104838155, 0.059614647, -0.06082954, 0.0012793174, 0.02170306, 0.026902769, 0.03946686, -0.079117276, -0.03152874, -0.12898633, -0.053004824, -0.028917072, -0.012368447, 0.015532111, -0.02174745, 0.08523351, -0.0282079, 0.16092727, -0.03788931, -0.060083434, -0.016723797, 0.054881062, -0.030294152, -0.07248608, 0.030073965, -0.034272477, 0.05126115, 0.055613477, 0.09495897, 0.049829394, -0.0364887, 0.03327526, -0.05878792, -0.011823824, 0.09363739, 0.056622148, 0.07065535, 0.0420792, 0.04533198, 0.009932993, 0.017854093, -0.029661845, 0.009261154, -0.1427187, 0.05127482, -0.049787972, 0.026035076, -0.08916386, -0.010229002, -0.049304567, -0.007191879, -0.0060313516, 0.019555919, 0.02338839, 0.064807124, 0.037488252, 0.12573367, -0.041802976, 0.07269758, 0.06485126, 0.060016576, 0.05003658, 0.055460926, 0.030393757, -0.048754014, 0.06831697, 0.048784226, -0.0030957125, 0.039461207, 0.011871226, -0.057192553, 0.06073324, -0.09614836, -5.0049813E-08, 0.035486203, -0.032582864, -0.025033187, 0.097981006, 0.07844627, -0.012560042, 0.009477441, 0.06474858, -0.1001069, -0.043746714, 0.08544528, -0.015366462, -0.076596916, -0.027158584, 0.024269467, -0.07204643, 0.03244715, 0.03726254, -0.029727655, -0.011009786, -0.04259118, 0.058453497, -0.06867837, 0.044818617, 0.044812564, 0.013221759, -0.031027878, 0.017544951, 0.059280045, -0.016102636, -0.020420417, 0.020912167, -0.0038810456, -0.014074841, 0.0040567103, -0.013163569, -0.08317428, 0.027397098, -0.075727746, -0.027554706, 0.15435661, -0.032180727, -0.005771967, 0.018858613, -0.030543238, 0.011946089, 0.0013676296, -0.15703627, -0.0046802554, 0.01854364, -0.087961234, -0.10650876, 0.055249702, 0.08523195, -0.017353278, 0.0010189874, -0.011569765, -0.0024693587, 0.0024849253, -0.035935074, 0.18413483, -0.0017511423, -0.046552822, 0.15179138
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 124, 138, 97, 137
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 73), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 36)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: -0.015853291, 0.05542705, 0.01993608, 0.010409614, 0.04030495, 0.024487935, 0.012450808, 0.080898374, -0.04762407, -0.040592417, -0.034638632, -0.057511713, 0.019266974, 0.024626411, -0.013906013, -0.0125189405, 0.052849766, -0.0203792, -0.024230516, 0.0031560468, 0.021517284, -0.024201214, 0.03272046, -0.0049326173, 0.01528788, -0.017597757, 0.0067911693, 0.036612276, -0.054969486, -0.028085819, -0.014986803, 0.056498554, 0.0313201, 0.01409707, -0.019249305, -0.18337022, -0.06536057, -0.027319925, -0.04112707, -0.031773258, -0.08062341, -0.039173767, -0.06880682, -0.010137883, 0.020812295, 0.014740777, 0.0062575405, 0.0043265517, 0.031614043, -0.0011630873, -0.078941084, -0.0016209048, -0.05154168, -0.025467642, -0.04500972, -0.013982628, -0.09450133, 0.008018496, 0.006918349, -0.02282745, 0.042468715, -0.049693573, -0.018009437, -0.009687597, -0.0087110335, -0.010196876, -0.011072794, -0.012847458, -0.018120842, 0.06452829, 0.07366742, 0.07442614, -0.0042015305, -0.04895777, -0.00023971192, 0.018775178, 0.078876175, -0.039508987, -0.03390528, -0.03676784, -0.06398393, -0.081897736, -0.11158714, -0.034825288, 0.03314155, -0.06214285, 0.0025223785, -0.07286481, 0.022035975, -0.027165543, -0.004310757, 0.047354415, -0.0010534518, -0.013408185, -0.084172055, 0.050806418, 0.02384702, -0.01820456, -0.043156914, 0.032970406, 0.05890163, 0.008517378, 0.03548478, 0.018777533, -0.05506839, 0.02569929, 0.010569028, 0.07019611, -0.0023209527, 0.013741327, -0.018273883, -0.02061895, -0.03153626, -0.062142808, -0.15469764, -0.0042452845, 0.030394102, -0.024870234, 0.13952185, 0.050627008, -0.029937316, -0.046053715, -0.020805871, 0.014131724, 0.032075875, -0.046955418, 0.015448874, 4.3394656E-33, -0.033329856, 0.019110305, 0.05777864, -0.013153999, -0.10275784, 0.026978405, -0.07719888, 0.03684834, -0.09868329, -0.019563671, -0.0033266656, 0.03257573, -0.036983393, 0.028604455, -0.007934233, -0.013836575, 0.005361305, -0.058443688, -0.015032327, -0.056097597, -0.028384542, 0.054289367, 0.025071168, -0.0265108, 0.048103593, 0.017933493, 0.039773818, -0.07867748, 0.04873533, 0.037131444, -0.047894772, -0.040747188, -0.026059486, -0.022177337, -0.0541113, 0.07238028, -0.11307788, -0.004659991, -0.06585356, -0.011908209, 0.04138503, -0.019575167, -0.08608311, -0.017036296, -0.025017511, 0.0150765525, -0.03195871, 0.03091342, 0.0324355, 0.023571534, -0.12559088, -0.01820148, -0.0697846, 0.02449858, -0.011674704, -0.01928173, -0.018665116, 0.009764391, -0.020788299, 0.002813434, -0.026258595, 0.013544464, 0.0550068, -0.07513213, -0.06229094, -0.006933942, -0.022871796, 0.021018919, -0.015139124, 0.081063606, -0.010005494, 0.018576544, 0.06984225, 0.02530717, 0.046634145, 0.016313536, -0.012013344, 0.034789868, 0.048610404, 0.004829641, -0.008538055, -0.010984923, -0.003078987, 0.039440747, 0.07999674, 0.026000587, -0.017780242, -0.056570005, 0.024936099, 0.0311249, -0.050284896, 0.042305335, 0.014775113, 0.002765672, 0.036673423, -6.118093E-33, 0.03544124, -0.03370637, 0.026232224, 0.025382765, 0.07659025, 0.013620334, -0.036573656, -0.03259828, 0.058953807, 0.050123494, -0.043273143, 0.011119321, 0.05024636, -0.07308753, -0.031512745, 0.030424869, 0.052487236, -0.11586814, -0.05129756, -0.017480645, -0.088137284, 0.10267081, -0.07444005, 0.059250843, -0.075935714, 0.006933732, 0.0077428436, 0.034439765, 0.005035012, -0.07973185, -0.038261093, -0.08503504, -0.031223897, -0.01616513, 0.011450346, 0.0052680625, -0.01561668, 0.058036957, -0.057918515, 0.17987584, -0.047492318, -0.045868546, 0.006485244, 0.03811029, -0.011840261, -0.053134754, 0.013686906, -0.07655122, 0.077903755, 0.009415757, 0.097892866, 0.042665735, -0.03999925, 0.034830343, -0.045486458, -0.011305512, 0.059863947, 0.090422325, 0.09160573, 0.05001939, 0.047113772, 0.044859152, 0.013441128, -0.006902155, 0.019391201, -0.12590414, 0.063398, -0.06481568, 0.018337617, -0.10210532, -0.0008216009, -0.019834783, -0.025453322, 0.034228407, 0.01214059, 0.02973939, 0.07670388, 0.026842749, 0.11938637, -0.012451267, 0.07956873, 0.06622361, 0.05218649, 0.03956718, 0.009253942, 0.0341691, -0.025437886, 0.04603056, 0.024948768, 0.008926519, 0.013215084, 0.031804588, -0.01607762, 0.053117223, -0.08991655, -4.5761997E-08, 0.067719504, -0.032391567, -0.009095741, 0.12827076, 0.055353194, -0.04679365, 0.008505496, 0.079845116, -0.11169071, -0.045874644, 0.0797168, -0.010075534, -0.08511693, 0.007817766, 0.016808558, -0.043801636, 0.00295032, 0.05945272, -0.02182913, -0.05933829, -0.045838386, 0.07350848, -0.055242963, 0.024946513, 0.034855764, 0.009412238, 0.0038240985, 0.04482836, 0.059005026, -0.014928514, -0.012346155, 0.007336182, 0.023763452, -0.024484694, -0.0028731716, 0.03296548, -0.0614563, 0.07538532, -0.06992591, -0.031488325, 0.118060544, -0.06483629, -0.0371482, -0.0058275647, -0.02347216, -0.0015001522, -0.013640554, -0.115409814, -0.004012606, 0.0070333397, -0.10547213, -0.09550021, 0.030858638, 0.11666804, -0.006002318, -0.008754484, -0.0046583544, -0.002555445, -0.0081006205, -0.0038884687, 0.19758922, -0.0040534507, -0.10290541, 0.13294113
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 133, 44, 80
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 18)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Calling local embedding service
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Calling local embedding service
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Received response from local embedding service: OK
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Received response from local embedding service: OK
Received response from local embedding service: OK
Generated vehicle embeddings for 157 vehicles
Ranking vehicles by similarity score...
Top 5 recommended vehicle IDs: 125, 97, 5, 133, 80
Executed DbCommand (0ms) [Parameters=[@__recommendedVehicleIds_0='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Id" IN (
    SELECT "r"."value"
    FROM json_each(@__recommendedVehicleIds_0) AS "r"
)
ORDER BY "v"."Id", "v0"."Id"
Final recommendation list contains 5 vehicles.
Application is shutting down...
Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Generating embeddings for 157 vehicles not in cache
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Generating embeddings for 157 vehicles not in cache
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Application is shutting down...
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
User data fetched, retrieving available vehicles.
User data fetched, retrieving available vehicles.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id"
Generating user embedding for user ID 2
Generating user embedding for user ID 2
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Generating embeddings for 157 vehicles not in cache
Calling local embedding service
Received response from local embedding service: OK
Generated user embedding: 0.017105214, 0.034531612, 0.01555792, 0.0076132813, 0.0110855475, 0.05091923, 0.026032276, 0.06638427, 0.001532441, -0.032186065, -0.022563562, -0.054511752, 0.004696925, -0.014641696, 0.0017868942, -0.00093971856, 0.030620232, -0.028248439, 0.0057166237, 0.017786156, -0.002189398, -0.017508293, 0.014888728, -0.008314281, 0.009986865, 0.031027704, 0.090853184, 0.04562231, -0.06186978, -0.027945641, -0.025910662, 0.05960603, 0.034538586, -0.0067036906, -0.081950486, -0.21372461, -0.09969175, -0.012479458, -0.05125494, -0.02736335, -0.07467478, -0.06681793, -0.03493235, -0.01523945, 0.01366559, 0.021193381, 0.008290774, 0.015025989, 0.06595014, -0.013633292, -0.03516726, -0.0015173766, -0.060877465, -0.08886533, -0.012240642, -0.0035718973, -0.11054848, 0.060730077, 0.02210993, -0.037912928, 0.04445545, -0.04205636, -0.010268469, -0.002037186, 0.009092051, 0.005723213, -0.025891118, -0.035207324, -0.015131045, 0.032566026, 0.054093268, 0.06954729, 0.058147755, -0.09619426, -0.0013547818, 0.011474347, 0.110874996, -0.047320932, -0.018910984, -0.07466882, -0.060482174, -0.034708183, -0.11828836, -0.0013558669, 0.011511483, -0.042456597, -0.0065658195, -0.028165132, -0.0138872955, -0.008263634, -0.044822365, 0.02033586, 0.016329417, -0.06273055, -0.1151417, 0.057222158, -0.009594986, -0.004021345, 0.020700777, 0.045294497, 0.06673306, 0.034660812, 0.03237799, 0.042302463, -0.06342718, -0.018323036, 0.010926961, 0.067130744, -0.004266388, 0.01852484, -0.04144365, -0.035555393, -0.0393343, -0.0148338685, -0.119815566, -0.016279025, 0.005839507, -0.013631308, 0.13987958, 0.09500264, -0.025240287, -0.09781782, 0.0070798444, 0.038307507, -0.047503646, -0.025609087, 0.03657779, 8.392504E-33, -0.057930168, -0.036417257, 0.02457212, -0.049088597, -0.065816134, 0.06906447, -0.06746834, 0.031381093, -0.094700746, -0.048413932, -0.02466668, 0.089920826, -0.064525194, 0.07697745, 0.04736339, -0.0057842107, -0.010441405, 0.0053663203, -0.035151612, -0.09266796, -0.025710804, 0.06113383, 0.0049412777, -0.026648974, 0.045330606, 0.0011883918, 0.037974063, -0.027511658, 0.014468883, 0.012675247, -0.024826488, 0.009018908, 0.018512215, -0.02861815, -0.05986189, 0.083596975, -0.07230465, 0.022463953, -0.030180482, -0.022351852, 0.037236404, -0.0139843235, -0.066886544, 0.001283969, -0.050520092, 0.07960897, 0.031215297, 0.03784617, -0.06824137, 0.015350986, -0.08289961, -0.0068639433, -0.079780206, 0.04546151, -0.047392547, -0.045438066, -0.012849597, 0.016883962, 0.008058844, -0.03648696, -0.032850206, 0.059244096, 0.08691029, -0.092640094, -0.07571932, 0.055840444, 0.011209477, -0.026073392, 0.004409258, 0.08903531, -0.019005815, 0.031590026, 0.056317598, 0.012362527, -0.011135817, 0.019350773, 0.00424573, 0.025519412, 0.021309227, -0.009162295, -0.023953026, -0.043127786, 0.03258742, 0.061487924, 0.08243302, 0.0009233156, -0.057290252, -0.04338781, 0.022391878, 0.008722647, -0.042599354, 0.045693174, 0.0039999816, -0.012446321, 0.015170285, -9.7340336E-33, -0.0024409727, -0.012650098, 0.032328974, 0.023631208, 0.035163783, 0.025806252, -0.0256767, 0.0012302778, 0.036228165, 0.036045864, 0.0054410165, -0.035728805, 0.07241312, -0.041962788, 0.018795691, 0.020436652, 0.061813116, -0.09767765, -0.017433755, -0.01626499, -0.08374676, 0.06752461, -0.06770897, 0.041288886, -0.02474091, 0.009173489, 0.027590591, -0.009008503, -0.04778281, -0.06746326, -0.006404796, -0.097422026, -0.028429667, 0.0083589135, -0.01788827, -0.014293111, -0.025449097, 0.072423145, -0.041525796, 0.16113989, -0.07665155, -0.07485813, 0.032020908, 0.08083939, 0.004024294, -0.06853425, 0.016885404, -0.032514293, 0.115112595, -0.010074182, 0.096719675, 0.05890436, -0.021111041, 0.02586544, -0.08360578, -0.013733839, 0.063999414, 0.036974058, 0.081349775, 0.026916306, 0.05857502, -0.019640815, -0.00095216813, -0.02629288, -0.005501822, -0.10242636, 0.015004872, -0.044388577, 4.223291E-05, -0.072441764, -0.013415137, -0.07886917, 0.0023517918, -0.03136559, 0.009478053, -0.020913882, 0.025481522, 0.042342626, 0.14797027, 0.022466043, 0.035894692, 0.035991784, 0.07550294, 0.03128612, 0.012562267, 0.007259495, -0.05642197, 0.07180833, 0.043132596, 0.025638783, 0.030203745, 0.039413378, -0.07121484, 0.007549041, -0.10742141, -4.743185E-08, 0.021025233, -0.09121968, -0.004368308, 0.15770723, 0.025220834, -0.016868014, 0.021855688, 0.07148018, -0.10072852, -0.02075585, 0.06814543, -0.025380319, -0.068728425, 0.0012043148, 0.018374216, -0.013827308, 0.044510886, 0.06914107, -0.019544778, 0.017824842, 0.027323602, 0.019660989, -0.023341939, 0.0381311, 0.030842667, 0.025615083, -0.072134145, 0.024066715, 0.063545674, 0.032541357, -0.017572705, 0.005517736, 0.023609335, -0.022225644, 0.033081137, -0.0055487473, -0.053466998, 0.0696921, -0.026605679, -0.005669204, 0.11799872, -0.10673257, -0.048484273, 0.012508942, -0.027052006, -0.009936046, 0.035673212, -0.109146215, -0.027647447, 0.015471211, -0.04360996, -0.059581894, 0.0030827909, 0.07587608, 0.03456493, -0.077308714, -0.015574712, 0.020376408, -0.05885858, -0.013546404, 0.11011277, -0.026344206, -0.098764434, 0.11059473
Generating vehicle embeddings...
Generating embeddings for 157 vehicles not in cache
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Application is shutting down...
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Received response from local embedding service: OK
Calling local embedding service
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 51), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 14)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Text prompt received: I need Tesla Cars
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Text prompt received: I need Tesla Cars
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Text prompt received: I need Tesla Cars
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/parameters
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 60), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Filtering by Makes: Tesla
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__parameters_PreferredMakes_0='?' (Size = 9)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Make" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredMakes_0) AS "p"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Application is shutting down...
Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Detected 'tesla' keyword, setting Make to Tesla
Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 52), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 15)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Filtering by Makes: Tesla
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[@__parameters_PreferredMakes_0='?' (Size = 9)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Make" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredMakes_0) AS "p"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Application is shutting down...
Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Application is shutting down...
Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "u"."Id", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "u"."UserId" = @__userId_0
ORDER BY "u"."Id", "v"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "u"."Id", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "u"."UserId" = @__userId_0
ORDER BY "u"."Id", "v"."Id"
Application is shutting down...
Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__vehicleId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserFavorites" AS "u"
    WHERE "u"."UserId" = @__userId_0 AND "u"."VehicleId" = @__vehicleId_1)
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__vehicleId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserFavorites" AS "u"
    WHERE "u"."UserId" = @__userId_0 AND "u"."VehicleId" = @__vehicleId_1)
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Id" = @__id_0
    LIMIT 1
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."Id", "v0"."Id"
Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO "BrowsingHistory" ("UserId", "VehicleId", "ViewDate", "ViewDurationSeconds")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Executed DbCommand (156ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO "BrowsingHistory" ("UserId", "VehicleId", "ViewDate", "ViewDurationSeconds")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "u"."Id", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "u"."UserId" = @__userId_0
ORDER BY "u"."Id", "v"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "u"."Id", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
LEFT JOIN "VehicleImages" AS "v0" ON "v"."Id" = "v0"."VehicleId"
WHERE "u"."UserId" = @__userId_0
ORDER BY "u"."Id", "v"."Id"
Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Detected 'tesla' keyword, setting Make to Tesla
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Filtering by Makes: Tesla
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[@__parameters_PreferredMakes_0='?' (Size = 9)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Make" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredMakes_0) AS "p"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 55), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 18)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Executed DbCommand (94ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/parameters
Parameter extraction service error: NotFound, <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 51), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 14)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/parameters
Parameter extraction service error: NotFound, <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 41), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 4)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/parameters
Parameter extraction service error: NotFound, <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 49), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 12)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Parameter extraction service error: BadRequest, {
  "error": "No query provided"
}

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 44), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 7)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Parameter extraction service error: BadRequest, {
  "error": "No query provided"
}

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 40), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 3)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/extract_parameters
Parameter extraction service error: NotFound, <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 41), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 4)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5005/extract_parameters
Parameter extraction service error: NotFound, <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 40), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 3)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Parameter extraction service error: BadRequest, {
  "error": "No query provided"
}

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 41), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 4)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Parameter extraction service error: BadRequest, {
  "error": "No query provided"
}

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 41), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 4)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 49), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 12)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 55), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 18)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Text.Json.JsonException: The JSON value could not be converted to SmartAutoTrader.API.Models.VehicleType. Path: $.preferredVehicleTypes[0] | LineNumber: 9 | BytePositionInLine: 9.
   at System.Text.Json.ThrowHelper.ThrowJsonException(String message)
   at System.Text.Json.Serialization.Converters.EnumConverter`1.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 437
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 48), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 11)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Text.Json.JsonException: The JSON value could not be converted to SmartAutoTrader.API.Models.VehicleType. Path: $.preferredVehicleTypes[0] | LineNumber: 11 | BytePositionInLine: 9.
   at System.Text.Json.ThrowHelper.ThrowJsonException(String message)
   at System.Text.Json.Serialization.Converters.EnumConverter`1.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 437
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 52), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 15)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Application is shutting down...
Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Text.Json.JsonException: The JSON value could not be converted to SmartAutoTrader.API.Models.FuelType. Path: $.preferredFuelTypes[0] | LineNumber: 9 | BytePositionInLine: 14.
   at System.Text.Json.ThrowHelper.ThrowJsonException(String message)
   at System.Text.Json.Serialization.Converters.EnumConverter`1.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 437
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 58), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 21)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executing vehicle query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executing vehicle query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executing vehicle query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 19)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 51), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 14)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars!","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 51), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 14)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":["suv"],"TextPrompt":"diesel Suvs","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 48), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 11)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Filtering by DesiredFeatures: suv
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: .param set @__parameters_DesiredFeatures_0 '["suv"]'

SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v1"."Id", "v1"."Name", "v1"."VehicleId", "v2"."Id", "v2"."ImageUrl", "v2"."IsPrimary", "v2"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
LEFT JOIN "VehicleImages" AS "v2" ON "v"."Id" = "v2"."VehicleId"
WHERE EXISTS (
    SELECT 1
    FROM "VehicleFeatures" AS "v0"
    WHERE "v"."Id" = "v0"."VehicleId" AND "v0"."Name" IN (
        SELECT "p"."value"
        FROM json_each(@__parameters_DesiredFeatures_0) AS "p"
    )) AND "v"."Status" = 0
ORDER BY "v"."Id", "v1"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[@__parameters_DesiredFeatures_0='?' (Size = 7)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v1"."Id", "v1"."Name", "v1"."VehicleId", "v2"."Id", "v2"."ImageUrl", "v2"."IsPrimary", "v2"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v1" ON "v"."Id" = "v1"."VehicleId"
LEFT JOIN "VehicleImages" AS "v2" ON "v"."Id" = "v2"."VehicleId"
WHERE EXISTS (
    SELECT 1
    FROM "VehicleFeatures" AS "v0"
    WHERE "v"."Id" = "v0"."VehicleId" AND "v0"."Name" IN (
        SELECT "p"."value"
        FROM json_each(@__parameters_DesiredFeatures_0) AS "p"
    )) AND "v"."Status" = 0
ORDER BY "v"."Id", "v1"."Id"
No available vehicles found for filtering criteria.
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 19)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
No specific parameters extracted from text prompt. Returning recent vehicles.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."DateListed" DESC, "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Applying filters based on extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 417
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 55), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 18)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Text.Json.JsonException: The JSON value could not be converted to SmartAutoTrader.API.Models.FuelType. Path: $.PreferredFuelTypes[0] | LineNumber: 8 | BytePositionInLine: 12.
   at System.Text.Json.ThrowHelper.ThrowJsonException(String message)
   at System.Text.Json.Serialization.Converters.EnumConverter`1.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 437
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 47), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 10)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Parameter extraction service error: InternalServerError, {
  "error": "Invalid format specifier ' [integer between 0 and 100000],\n    \"max\": [integer between 0 and 100000]\n  ' for object of type 'str'"
}

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 68), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 31)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Application is shutting down...
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Parameter extraction service error: InternalServerError, {
  "error": "Invalid format specifier ' [integer between 0 and 100000],\n    \"max\": [integer between 0 and 100000]\n  ' for object of type 'str'"
}

Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Application is shutting down...
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 69), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 32)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Application is shutting down...
Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[],"PreferredVehicleTypes":[],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"electric cars from tesla!","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 62), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 25)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 61), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 24)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 61), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 24)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Fetching recommendations for user ID: 2
Fetching recommendations for user ID: 2
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Returning 5 vehicles based on parameter filtering
Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[],"PreferredMakes":["Tesla"],"DesiredFeatures":[],"TextPrompt":"tesla electric cars","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 56), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 19)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[],"PreferredMakes":["Tesla"],"DesiredFeatures":[],"TextPrompt":"tesla electric cars","MaxResults":5}
Key filter values: Makes=Tesla, FuelTypes=Electric, VehicleTypes=
Filtering by fuel types: Electric
Filtering by manufacturers: Tesla
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: .param set @__parameters_PreferredFuelTypes_0 '[2]'
.param set @__lowerMakes_1 '["tesla"]'

SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."FuelType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_0) AS "p"
) AND lower("v"."Make") IN (
    SELECT "l"."value"
    FROM json_each(@__lowerMakes_1) AS "l"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[@__parameters_PreferredFuelTypes_0='?' (Size = 3), @__lowerMakes_1='?' (Size = 9)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."FuelType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_0) AS "p"
) AND lower("v"."Make") IN (
    SELECT "l"."value"
    FROM json_each(@__lowerMakes_1) AS "l"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 2 vehicles based on parameter filtering
Recommended vehicle: 2012 Tesla Model 3, Type=Estate, Fuel=Electric
Recommended vehicle: 2025 Tesla Cybertruck, Type=SUV, Fuel=Electric
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":null,"MaxResults":5}
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":null,"MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[1],"PreferredVehicleTypes":[1],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"diesel SUV","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 47), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 10)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[1],"PreferredVehicleTypes":[1],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"diesel SUV","MaxResults":5}
Key filter values: Makes=, FuelTypes=Diesel, VehicleTypes=SUV
Filtering by vehicle types: SUV
Filtering by fuel types: Diesel
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: .param set @__parameters_PreferredVehicleTypes_0 '[1]'
.param set @__parameters_PreferredFuelTypes_1 '[1]'

SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[@__parameters_PreferredVehicleTypes_0='?' (Size = 3), @__parameters_PreferredFuelTypes_1='?' (Size = 3)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 4 vehicles based on parameter filtering
Recommended vehicle: 2010 Tesla Model Y, Type=SUV, Fuel=Diesel
Recommended vehicle: 2012 Mazda CX-9, Type=SUV, Fuel=Diesel
Recommended vehicle: 2013 Mazda CX-30, Type=SUV, Fuel=Diesel
Recommended vehicle: 2025 Mazda CX-5, Type=SUV, Fuel=Diesel
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 54), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"petrol suvs baby!","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[1],"PreferredMakes":["Toyota"],"DesiredFeatures":[],"TextPrompt":"Electric SUV only","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 54), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 17)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[1],"PreferredMakes":["Toyota"],"DesiredFeatures":[],"TextPrompt":"Electric SUV only","MaxResults":5}
Key filter values: Makes=Toyota, FuelTypes=Electric, VehicleTypes=SUV
Filtering by vehicle types: SUV
Filtering by fuel types: Electric
Filtering by manufacturers: Toyota
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: .param set @__parameters_PreferredVehicleTypes_0 '[1]'
.param set @__parameters_PreferredFuelTypes_1 '[2]'
.param set @__lowerMakes_2 '["toyota"]'

SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND lower("v"."Make") IN (
    SELECT "l"."value"
    FROM json_each(@__lowerMakes_2) AS "l"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__parameters_PreferredVehicleTypes_0='?' (Size = 3), @__parameters_PreferredFuelTypes_1='?' (Size = 3), @__lowerMakes_2='?' (Size = 10)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND lower("v"."Make") IN (
    SELECT "l"."value"
    FROM json_each(@__lowerMakes_2) AS "l"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
No available vehicles found for filtering criteria.
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[1],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"no brand pref only electric suv","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 68), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 31)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[1],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"no brand pref only electric suv","MaxResults":5}
Key filter values: Makes=, FuelTypes=Electric, VehicleTypes=SUV
Filtering by vehicle types: SUV
Filtering by fuel types: Electric
SQL Query: .param set @__parameters_PreferredVehicleTypes_0 '[1]'
.param set @__parameters_PreferredFuelTypes_1 '[2]'

SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__parameters_PreferredVehicleTypes_0='?' (Size = 3), @__parameters_PreferredFuelTypes_1='?' (Size = 3)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 4 vehicles based on parameter filtering
Recommended vehicle: 2015 Lexus LS, Type=SUV, Fuel=Electric
Recommended vehicle: 2011 Mercedes-Benz C-Class, Type=SUV, Fuel=Electric
Recommended vehicle: 2013 Subaru Impreza, Type=SUV, Fuel=Electric
Recommended vehicle: 2025 Tesla Cybertruck, Type=SUV, Fuel=Electric
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[1],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"only electric SUVs","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 55), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 18)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[1],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"only electric SUVs","MaxResults":5}
Key filter values: Makes=, FuelTypes=Electric, VehicleTypes=SUV
Filtering by vehicle types: SUV
Filtering by fuel types: Electric
SQL Query: .param set @__parameters_PreferredVehicleTypes_0 '[1]'
.param set @__parameters_PreferredFuelTypes_1 '[2]'

SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__parameters_PreferredVehicleTypes_0='?' (Size = 3), @__parameters_PreferredFuelTypes_1='?' (Size = 3)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 4 vehicles based on parameter filtering
Recommended vehicle: 2015 Lexus LS, Type=SUV, Fuel=Electric
Recommended vehicle: 2011 Mercedes-Benz C-Class, Type=SUV, Fuel=Electric
Recommended vehicle: 2013 Subaru Impreza, Type=SUV, Fuel=Electric
Recommended vehicle: 2025 Tesla Cybertruck, Type=SUV, Fuel=Electric
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 57), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars please","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 57), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars please","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 58), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 21)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars please!","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 63), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars please miss!","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 59), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 22)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars please!!","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Application is shutting down...
Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[0],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"electric cars please!","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 58), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 21)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[2],"PreferredVehicleTypes":[0],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"electric cars please!","MaxResults":5}
Key filter values: Makes=, FuelTypes=Electric, VehicleTypes=Sedan
Filtering by vehicle types: Sedan
Filtering by fuel types: Electric
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: .param set @__parameters_PreferredVehicleTypes_0 '[0]'
.param set @__parameters_PreferredFuelTypes_1 '[2]'

SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[@__parameters_PreferredVehicleTypes_0='?' (Size = 3), @__parameters_PreferredFuelTypes_1='?' (Size = 3)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 3 vehicles based on parameter filtering
Recommended vehicle: 2021 Audi e-tron, Type=Sedan, Fuel=Electric
Recommended vehicle: 2010 Ford Edge, Type=Sedan, Fuel=Electric
Recommended vehicle: 2025 Subaru Ascent, Type=Sedan, Fuel=Electric
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Final extracted parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[0,1,2,3],"PreferredVehicleTypes":[1],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"wtf why you dont have any SUVs ","MaxResults":5}
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 68), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 31)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":[0,1,2,3],"PreferredVehicleTypes":[1],"PreferredMakes":[],"DesiredFeatures":[],"TextPrompt":"wtf why you dont have any SUVs ","MaxResults":5}
Key filter values: Makes=, FuelTypes=Petrol, Diesel, Electric, Hybrid, VehicleTypes=SUV
Filtering by vehicle types: SUV
Filtering by fuel types: Petrol, Diesel, Electric, Hybrid
SQL Query: .param set @__parameters_PreferredVehicleTypes_0 '[1]'
.param set @__parameters_PreferredFuelTypes_1 '[0,1,2,3]'

SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__parameters_PreferredVehicleTypes_0='?' (Size = 3), @__parameters_PreferredFuelTypes_1='?' (Size = 9)], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."VehicleType" IN (
    SELECT "p"."value"
    FROM json_each(@__parameters_PreferredVehicleTypes_0) AS "p"
) AND "v"."FuelType" IN (
    SELECT "p0"."value"
    FROM json_each(@__parameters_PreferredFuelTypes_1) AS "p0"
) AND "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2012 Toyota 4Runner, Type=SUV, Fuel=Petrol
Recommended vehicle: 2018 Toyota 4Runner, Type=SUV, Fuel=Hybrid
Recommended vehicle: 2023 BMW 3 Series, Type=SUV, Fuel=Hybrid
Recommended vehicle: 2025 Mazda CX-9, Type=SUV, Fuel=Petrol
Application is shutting down...
Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\Users\gille\Documents\Projects\SmartAutoTrader\backend
Processing chat message from user ID: 2
Processing chat message for user ID: 2
Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in C:\Users\gille\Documents\Projects\SmartAutoTrader\backend\Services\ChatRecommendationsService.cs:line 414
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 66), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 29)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 2 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"do you have any Electric Cars","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Application is shutting down...
Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Error processing with AI
System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.SendAsync(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ProcessWithAIAsync(String message, String userContext) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 253
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars only please!","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 92), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 26)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Error processing with AI
System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.SendAsync(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationToken cancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ProcessWithAIAsync(String message, String userContext) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 253
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"diesel suvs only please","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 92), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 23)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Application is shutting down...
Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Net.Http.HttpRequestException: Connection refused (localhost:5006)
 ---> System.Net.Sockets.SocketException: Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 301
Clarification needed for user query
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 376), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 21)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Processing clarification. Combined message: electric cars please! - Additional info: sedan, dont mind manufacturers , really not to concerned about the age, as new as you can! thanks
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Net.Http.HttpRequestException: Connection refused (localhost:5006)
 ---> System.Net.Sockets.SocketException: Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 301
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 175), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 97)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars please! - Additional info: sedan, dont mind manufacturers , really not to concerned about the age, as new as you can! thanks","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Application is shutting down...
Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Application is shutting down...
Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Net.Http.HttpRequestException: Connection refused (localhost:5006)
 ---> System.Net.Sockets.SocketException: Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 301
Clarification needed for user query
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 376), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 24)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Processing clarification. Combined message: electric cars suv cheap! - Additional info: SUV dont mind manufacturer cheap as possible
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Net.Http.HttpRequestException: Connection refused (localhost:5006)
 ---> System.Net.Sockets.SocketException: Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 301
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 125), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 44)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars suv cheap! - Additional info: SUV dont mind manufacturer cheap as possible","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Net.Http.HttpRequestException: Connection refused (localhost:5006)
 ---> System.Net.Sockets.SocketException: Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 301
Clarification needed for user query
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 376), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 18)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Processing clarification. Combined message: tesla electric suv - Additional info: tesla  electric suv
Calling parameter extraction service at http://localhost:5006/extract_parameters
Error extracting parameters from message
System.Net.Http.HttpRequestException: Connection refused (localhost:5006)
 ---> System.Net.Sockets.SocketException: Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 301
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 94), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 19)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"tesla electric suv - Additional info: tesla  electric suv","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Application is shutting down...
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Calling parameter extraction service at http://0.0.0.0:5006/extract_parameters
Error extracting parameters from message
System.Net.Http.HttpRequestException: IPv4 address 0.0.0.0 and IPv6 address ::0 are unspecified addresses that cannot be used as a target address. (Parameter 'hostName') (0.0.0.0:5006)
 ---> System.ArgumentException: IPv4 address 0.0.0.0 and IPv6 address ::0 are unspecified addresses that cannot be used as a target address. (Parameter 'hostName')
   at System.Net.Dns.GetHostEntryOrAddressesCoreAsync(String hostName, Boolean justReturnParsedIp, Boolean throwOnIIPAny, Boolean justAddresses, AddressFamily family, CancellationToken cancellationToken)
   at System.Net.Dns.GetHostAddressesAsync(String hostNameOrAddress, AddressFamily family, CancellationToken cancellationToken)
   at System.Net.Sockets.SocketAsyncEventArgs.DnsConnectAsync(DnsEndPoint endPoint, SocketType socketType, ProtocolType protocolType)
   at System.Net.Sockets.Socket.ConnectAsync(SocketAsyncEventArgs e, Boolean userSocket, Boolean saeaCancelable)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ConnectAsync(Socket socket)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 301
Clarification needed for user query
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 376), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 24)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Processing clarification. Combined message: electric car sedan tesla - Additional info: electric car sedan tesla
Calling parameter extraction service at http://0.0.0.0:5006/extract_parameters
Error extracting parameters from message
System.Net.Http.HttpRequestException: IPv4 address 0.0.0.0 and IPv6 address ::0 are unspecified addresses that cannot be used as a target address. (Parameter 'hostName') (0.0.0.0:5006)
 ---> System.ArgumentException: IPv4 address 0.0.0.0 and IPv6 address ::0 are unspecified addresses that cannot be used as a target address. (Parameter 'hostName')
   at System.Net.Dns.GetHostEntryOrAddressesCoreAsync(String hostName, Boolean justReturnParsedIp, Boolean throwOnIIPAny, Boolean justAddresses, AddressFamily family, CancellationToken cancellationToken)
   at System.Net.Dns.GetHostAddressesAsync(String hostNameOrAddress, AddressFamily family, CancellationToken cancellationToken)
   at System.Net.Sockets.SocketAsyncEventArgs.DnsConnectAsync(DnsEndPoint endPoint, SocketType socketType, ProtocolType protocolType)
   at System.Net.Sockets.Socket.ConnectAsync(SocketAsyncEventArgs e, Boolean userSocket, Boolean saeaCancelable)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ConnectAsync(Socket socket)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 301
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 105), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 24)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric car sedan tesla - Additional info: electric car sedan tesla","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Application is shutting down...
Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
About to call parameter extraction for message: electric cars please
Calling parameter extraction service at http://0.0.0.0:5006/extract_parameters
SENDING REQUEST to http://0.0.0.0:5006/extract_parameters with payload: electric cars please
Error extracting parameters from message
System.Net.Http.HttpRequestException: IPv4 address 0.0.0.0 and IPv6 address ::0 are unspecified addresses that cannot be used as a target address. (Parameter 'hostName') (0.0.0.0:5006)
 ---> System.ArgumentException: IPv4 address 0.0.0.0 and IPv6 address ::0 are unspecified addresses that cannot be used as a target address. (Parameter 'hostName')
   at System.Net.Dns.GetHostEntryOrAddressesCoreAsync(String hostName, Boolean justReturnParsedIp, Boolean throwOnIIPAny, Boolean justAddresses, AddressFamily family, CancellationToken cancellationToken)
   at System.Net.Dns.GetHostAddressesAsync(String hostNameOrAddress, AddressFamily family, CancellationToken cancellationToken)
   at System.Net.Sockets.SocketAsyncEventArgs.DnsConnectAsync(DnsEndPoint endPoint, SocketType socketType, ProtocolType protocolType)
   at System.Net.Sockets.Socket.ConnectAsync(SocketAsyncEventArgs e, Boolean userSocket, Boolean saeaCancelable)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ConnectAsync(Socket socket)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 304
Parameter extraction completed: True
Clarification needed for user query
Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 376), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Processing clarification. Combined message: electric cars please - Additional info: electric car splesae!
About to call parameter extraction for message: electric cars please - Additional info: electric car splesae!
Calling parameter extraction service at http://0.0.0.0:5006/extract_parameters
SENDING REQUEST to http://0.0.0.0:5006/extract_parameters with payload: electric cars please - Additional info: electric car splesae!
Error extracting parameters from message
System.Net.Http.HttpRequestException: IPv4 address 0.0.0.0 and IPv6 address ::0 are unspecified addresses that cannot be used as a target address. (Parameter 'hostName') (0.0.0.0:5006)
 ---> System.ArgumentException: IPv4 address 0.0.0.0 and IPv6 address ::0 are unspecified addresses that cannot be used as a target address. (Parameter 'hostName')
   at System.Net.Dns.GetHostEntryOrAddressesCoreAsync(String hostName, Boolean justReturnParsedIp, Boolean throwOnIIPAny, Boolean justAddresses, AddressFamily family, CancellationToken cancellationToken)
   at System.Net.Dns.GetHostAddressesAsync(String hostNameOrAddress, AddressFamily family, CancellationToken cancellationToken)
   at System.Net.Sockets.SocketAsyncEventArgs.DnsConnectAsync(DnsEndPoint endPoint, SocketType socketType, ProtocolType protocolType)
   at System.Net.Sockets.Socket.ConnectAsync(SocketAsyncEventArgs e, Boolean userSocket, Boolean saeaCancelable)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ConnectAsync(Socket socket)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 304
Parameter extraction completed: True
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 98), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 21)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars please - Additional info: electric car splesae!","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Application is shutting down...
Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
About to call parameter extraction for message: electric cars please
Calling parameter extraction service at http://192.168.1.5:5006/extract_parameters
SENDING REQUEST to http://192.168.1.5:5006/extract_parameters with payload: electric cars please
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 304
Parameter extraction completed: True
Clarification needed for user query
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 376), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 20)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM "Vehicles" AS "v"
WHERE "v"."Status" = 0
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."Country", "t"."DateListed", "t"."Description", "t"."EngineSize", "t"."FuelType", "t"."HorsePower", "t"."Make", "t"."Mileage", "t"."Model", "t"."Price", "t"."Status", "t"."Transmission", "t"."VehicleType", "t"."Year", "v0"."Id", "v0"."ImageUrl", "v0"."IsPrimary", "v0"."VehicleId", "v1"."Id", "v1"."Name", "v1"."VehicleId"
FROM (
    SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
    FROM "Vehicles" AS "v"
    WHERE "v"."Status" = 0
    ORDER BY "v"."DateListed" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN "VehicleImages" AS "v0" ON "t"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleFeatures" AS "v1" ON "t"."Id" = "v1"."VehicleId"
ORDER BY "t"."DateListed" DESC, "t"."Id", "v0"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
About to call parameter extraction for message: need electric cars
Calling parameter extraction service at http://192.168.1.5:5006/extract_parameters
SENDING REQUEST to http://192.168.1.5:5006/extract_parameters with payload: need electric cars
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 304
Parameter extraction completed: True
Clarification needed for user query
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 376), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 18)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Processing clarification. Combined message: need electric cars - Additional info: suv tesla cheap as possible!!
About to call parameter extraction for message: need electric cars - Additional info: suv tesla cheap as possible!!
Calling parameter extraction service at http://192.168.1.5:5006/extract_parameters
SENDING REQUEST to http://192.168.1.5:5006/extract_parameters with payload: need electric cars - Additional info: suv tesla cheap as possible!!
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 304
Parameter extraction completed: True
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 104), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 29)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"need electric cars - Additional info: suv tesla cheap as possible!!","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
Application is shutting down...
Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Vehicles" AS "v")
Now listening on: https://localhost:7001
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: /Users/conorgillespie/Projects/SmartAutoTrader/backend
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "c"."Id", "c"."UserMessage", "c"."AIResponse", "c"."Timestamp"
FROM "ChatHistory" AS "c"
WHERE "c"."UserId" = @__userId_0
ORDER BY "c"."Timestamp" DESC
LIMIT @__p_1
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
About to call parameter extraction for message: electric cars
Calling parameter extraction service at http://192.168.1.5:5006/extract_parameters
SENDING REQUEST to http://192.168.1.5:5006/extract_parameters with payload: electric cars
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 304
Parameter extraction completed: True
Clarification needed for user query
Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 376), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 13)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Processing chat message from user ID: 1
Processing chat message for user ID: 1
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."DateRegistered", "t"."Email", "t"."FirstName", "t"."LastName", "t"."PasswordHash", "t"."PhoneNumber", "t"."Username", "u0"."Id", "u0"."PreferenceType", "u0"."UserId", "u0"."Value", "u0"."Weight"
FROM (
    SELECT "u"."Id", "u"."DateRegistered", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PhoneNumber", "u"."Username"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__userId_0
    LIMIT 1
) AS "t"
LEFT JOIN "UserPreferences" AS "u0" ON "t"."Id" = "u0"."UserId"
ORDER BY "t"."Id"
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "u"."Id", "u"."DateAdded", "u"."UserId", "u"."VehicleId", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM "UserFavorites" AS "u"
INNER JOIN "Vehicles" AS "v" ON "u"."VehicleId" = "v"."Id"
WHERE "u"."UserId" = @__userId_0
Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT "t"."Id", "t"."UserId", "t"."VehicleId", "t"."ViewDate", "t"."ViewDurationSeconds", "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year"
FROM (
    SELECT "b"."Id", "b"."UserId", "b"."VehicleId", "b"."ViewDate", "b"."ViewDurationSeconds"
    FROM "BrowsingHistory" AS "b"
    WHERE "b"."UserId" = @__userId_0
    ORDER BY "b"."ViewDate" DESC
    LIMIT @__p_1
) AS "t"
INNER JOIN "Vehicles" AS "v" ON "t"."VehicleId" = "v"."Id"
ORDER BY "t"."ViewDate" DESC
Processing clarification. Combined message: electric cars - Additional info: tesla cheap!
About to call parameter extraction for message: electric cars - Additional info: tesla cheap!
Calling parameter extraction service at http://192.168.1.5:5006/extract_parameters
SENDING REQUEST to http://192.168.1.5:5006/extract_parameters with payload: electric cars - Additional info: tesla cheap!
Error extracting parameters from message
System.Threading.Tasks.TaskCanceledException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SmartAutoTrader.API.Services.ChatRecommendationService.ExtractParametersAsync(String message) in /Users/conorgillespie/Projects/SmartAutoTrader/backend/Services/ChatRecommendationsService.cs:line 304
Parameter extraction completed: True
Extracted parameters: SmartAutoTrader.API.Services.RecommendationParameters
Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 82), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 12)], CommandType='Text', CommandTimeout='30']
INSERT INTO "ChatHistory" ("AIResponse", "Timestamp", "UserId", "UserMessage")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
Fetching recommendations for user ID: 1 with parameters: {"MinPrice":null,"MaxPrice":null,"MinYear":null,"MaxYear":null,"PreferredFuelTypes":null,"PreferredVehicleTypes":null,"PreferredMakes":null,"DesiredFeatures":null,"TextPrompt":"electric cars - Additional info: tesla cheap!","MaxResults":5}
Key filter values: Makes=null, FuelTypes=null, VehicleTypes=null
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
SQL Query: SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "v"."Id", "v"."Country", "v"."DateListed", "v"."Description", "v"."EngineSize", "v"."FuelType", "v"."HorsePower", "v"."Make", "v"."Mileage", "v"."Model", "v"."Price", "v"."Status", "v"."Transmission", "v"."VehicleType", "v"."Year", "v0"."Id", "v0"."Name", "v0"."VehicleId", "v1"."Id", "v1"."ImageUrl", "v1"."IsPrimary", "v1"."VehicleId"
FROM "Vehicles" AS "v"
LEFT JOIN "VehicleFeatures" AS "v0" ON "v"."Id" = "v0"."VehicleId"
LEFT JOIN "VehicleImages" AS "v1" ON "v"."Id" = "v1"."VehicleId"
WHERE "v"."Status" = 0
ORDER BY "v"."Id", "v0"."Id"
Returning 5 vehicles based on parameter filtering
Recommended vehicle: 2023 Kia Telluride, Type=Pickup, Fuel=Hybrid
Recommended vehicle: 2024 Volkswagen Jetta, Type=Convertible, Fuel=Petrol
Recommended vehicle: 2013 Honda CR-V, Type=Coupe, Fuel=Electric
Recommended vehicle: 2011 Kia Seltos, Type=SUV, Fuel=Petrol
Recommended vehicle: 2024 Subaru Outback, Type=Van, Fuel=Plugin
